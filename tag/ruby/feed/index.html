<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Ruby &#8211; Mediocre Inventions</title>
	<atom:link href="https://www.mediocreinventions.com/tag/ruby/feed/" rel="self" type="application/rss+xml" />
	<link>https://www.mediocreinventions.com/</link>
	<description></description>
	<lastBuildDate>Wed, 13 Feb 2019 05:45:09 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.0.1</generator>
	<item>
		<title>5. Ruby on Rails With React</title>
		<link>https://www.mediocreinventions.com/rails-with-react/</link>
		<pubDate>Sun, 30 Dec 2018 03:15:22 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Ruby on Rails With React]]></category>
		<category><![CDATA[React]]></category>
		<category><![CDATA[React.js]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[Ruby on Rails]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=791</guid>
		<description><![CDATA[<p>Intro This article is going to be a very brief rundown of what React.js is and how to use it with your application. React is a very popular JavaScript library and there are a lot of courses out there that can teach you its ins and outs in detail. However, &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-with-react/">5. Ruby on Rails With React</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>This article is going to be a very brief 
rundown of what React.js is and how to use it with your application. 
React is a very popular JavaScript library and there are a lot of 
courses out there that can teach you its ins and outs in detail. 
However, if you just want to get up and running and figure out the 
details later when you need to, then this article with go through just 
that. We will cover how to Create, Read, Update, and Delete objects in 
our database using React and AJAX to interact with our Rails API. </p>



<p>React
 is a JavaScript library that allows developers to create a website&#8217;s UI
 by using small pieces of code (JavaScript files called Components). You
 can use these components to display dynamic data (eg: data from your 
api or database) as well as static elements (regular HTML elements like 
&lt;p&gt; or even &lt;script&gt; snippets for regular JavaScript). This 
allows for a cleaner and more maintainable way to build your front-end 
compared to writing massive custom JavaScript and HTML files. </p>



<p><strong>Note:</strong></p>



<p>For more information on this topic, you can find a similar tutorial here: <a href="https://www.nopio.com/blog/react-rails-part-1-tutorial/" target="_blank" rel="noreferrer noopener">https://www.nopio.com/blog/react-rails-part-1-tutorial/</a></p>



<p>This
 tutorial is based on the above article, however, they seem to be using 
an older version of React so some of the functions might not work 
anymore. If you followed that tutorial and created the React components 
with React.createClass, then you might run into some JavaScript errors 
in your browser console such as </p>



<p>TypeError: React.createClass is not a function</p>



<p>This
 is because React.createClass is no longer used for creating components.
 This article will aim to make this work using React 16.2, Rails 5.2 and
 the latest version of JavaScript at this time (2018). </p>



<h2>React</h2>



<p>In
 our setup article, we ran rails g react:install to setup React to work 
with Rails. Now we can focus on creating the components. React&#8217;s 
components are stored in the /apps/assets/javascripts/components/ 
folder. We can start by creating a new folder here called book inside of
 this components folder, then create a new file here called 
book_app.js.jsx. Your folder stucture should now be as such: 
/apps/assets/javascripts/components/book/book_app.js.jsx. </p>



<p>Now let&#8217;s populate this book_app component with code so that it looks like this: <a rel="noreferrer noopener" href="https://gist.github.com/mt9304/3d165e7b5f052d5595ad7bdc564b3f6c" target="_blank">https://gist.github.com/mt9304/3d165e7b5f052d5595ad7bdc564b3f6c</a></p>



<script src="https://gist.github.com/mt9304/3d165e7b5f052d5595ad7bdc564b3f6c.js"></script>



<p>If
 you are curious, you can find out more about React functions at their 
website here: https://reactjs.org/docs/react-component.html. However, if
 you just want the cliff notes of what is relevant in this project, I 
will explain it here. </p>



<p>You declare a React component with the line: </p>



<pre class="wp-block-preformatted">class BookApp extends React.Component { 
...
} 
</pre>



<p>Inside this class, there are certain default functions that 
React will load in a set order. The functions are called: constructor(),
 static getDerivedStateFromPropers(), render(), and componentDidMount().
 So everytime you load a React component on a page, these functions will
 be called in that order. The constructor() initiates the component and 
the render() function renders the HTML for the page. Then if that state 
of the component changes, the render() function gets called again. </p>



<h4>React Workflow<br></h4>



<p>Here is the general flow of what is happening here in our component: </p>



<p>The
 constructor initiates the component in our BookApp by setting the state
 with an empty array of &#8220;books&#8221;. The &#8220;state&#8221; in this case can be thought
 of as the place to store variables so that our page can use it and 
render dynamic content. Then it renders text that says &#8220;Loading&#8230;&#8221; for a
 bit before calling componentDidMount(), which runs a custom function we
 created called getDataFromApi(). This function then uses AJAX 
(basically JavaScript that can interact with our API) to get Book data 
from our database and store it in the &#8220;state&#8221;. Now that the state has 
changed again, render is called and updates the &#8220;Loading&#8230;&#8221; to &#8220;Your 
books will go here!&#8221;. </p>



<p><strong>Note:</strong></p>



<p>The getDataFromApi()
 function stores variables called error and isLoaded in the state, and 
sets their values depending on how the API called goes. This helps with 
troubleshooting because the render() function will print out errors if 
it does run into any. </p>



<h4>Rendering</h4>



<p>Now that we have the component, lets go into /app/views/homepage/index.html.erb and change it so that it renders our component instead of the default text. Replace everything in the index.html.erb file with: </p>



<pre class="wp-block-preformatted">&lt;%= react_component 'BookApp' %&gt;
</pre>



<p>This tells the application to render the React component we just created. You can start your server again and refresh the page to see it. Your page should now look like this: </p>



<figure class="wp-block-image"><img src="http://mediocreinventions.herokuapp.com/wp-content/uploads/books.png" alt="" class="wp-image-921" srcset="https://www.mediocreinventions.com/wp-content/uploads/books.png 955w, https://www.mediocreinventions.com/wp-content/uploads/books-300x63.png 300w, https://www.mediocreinventions.com/wp-content/uploads/books-768x161.png 768w" sizes="(max-width: 955px) 100vw, 955px" /></figure>



<p>Now
 we can work on populating this area with a table to render all our book
 entries. Fortunately, React allows you to render other components 
within a component so that we don&#8217;t have to stack one file with so much 
code. So let&#8217;s start by creating some new files called book_table.js.jsx
 and book.js.jsx in the same folder as book_app.js.jsx. Fill out the 
table file so that it looks like this: <a href="https://gist.github.com/mt9304/fe72fac20278203c3ece7263536a741e" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/fe72fac20278203c3ece7263536a741e</a> and the book file should look like this: <a href="https://gist.github.com/mt9304/266b22788e8a7f6144c026abffbc9441" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/266b22788e8a7f6144c026abffbc9441</a></p>



<p>If all went well, then you page should now look something like this: </p>



<figure class="wp-block-image"><img src="http://mediocreinventions.herokuapp.com/wp-content/uploads/book_table-1024x459.png" alt="" class="wp-image-922" srcset="https://www.mediocreinventions.com/wp-content/uploads/book_table-1024x459.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/book_table-300x135.png 300w, https://www.mediocreinventions.com/wp-content/uploads/book_table-768x344.png 768w, https://www.mediocreinventions.com/wp-content/uploads/book_table.png 1055w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>Now you should have a working delete button that should delete the entries when clicked! You can then implement the rest of the functions as you would like to build on this application. For some examples on implementing adding and editing with React, this article seems to cover the rest: <a href="https://www.nopio.com/blog/react-rails-part-1-tutorial/">https://www.nopio.com/blog/react-rails-part-1-tutorial/</a></p>



<p>For our purposes, this basic application should be enough to deploy to a Production environment. The next articles will go through some common options for hosting your web application. <br></p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-with-react/">5. Ruby on Rails With React</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>4. Ruby on Rails Authorization</title>
		<link>https://www.mediocreinventions.com/rails-authorization/</link>
		<pubDate>Sun, 30 Dec 2018 03:08:52 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Rails Authentication/Authorization]]></category>
		<category><![CDATA[Authorization]]></category>
		<category><![CDATA[CanCanCan]]></category>
		<category><![CDATA[Rolify]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[Ruby on Rails]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=721</guid>
		<description><![CDATA[<p>Intro In this article, we will create two roles for the users: the Admin role and Normal_User role. Users with the Admin role should have access to create and modify books on the website, while normal_users should only be able to view the books. We use the Rolify and CanCanCan &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-authorization/">4. Ruby on Rails Authorization</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this
 article, we will create two roles for the users: the Admin role and 
Normal_User role. Users with the Admin role should have access to create
 and modify books on the website, while normal_users should only be able
 to view the books. </p>



<p>We use the Rolify and CanCanCan gems to help us implement authorization. To start this, go into the console and type: </p>



<pre class="wp-block-preformatted">rails g rolify Role User
rails generate cancan:ability
rake db:migrate
</pre>



<h2>Roles</h2>



<p>Then go into /app/models/Roles.rb and make sure that it looks like this: <a rel="noreferrer noopener" href="https://gist.github.com/mt9304/ef8fd420d43ecdd442e9c418c6667243" target="_blank">https://gist.github.com/mt9304/ef8fd420d43ecdd442e9c418c6667243</a><br><br></p>
<script src="https://gist.github.com/mt9304/ef8fd420d43ecdd442e9c418c6667243.js"></script>



<p>Now we can go into our /db/seeds.rb file and add some roles, books, and sample users. </p>



<p><p>The seeds.rb file should look like this: <a href="https://gist.github.com/mt9304/c67f4e862fedfaa01c47e9934f5663c9" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/c67f4e862fedfaa01c47e9934f5663c9</a></p>
<script src="https://gist.github.com/mt9304/c67f4e862fedfaa01c47e9934f5663c9.js"></script></p>



<p>Let&#8217;s erase our database and start fresh by typing: </p>



<pre class="wp-block-preformatted">rake db:drop db:create db:migrate
</pre>



<p>We can then run the commands in the seeds.rb file by going into our terminal and typing: </p>



<pre class="wp-block-preformatted">rake db:seed
</pre>



<p><strong>Note: </strong></p>



<p>The seeds.rb file are 
just a list of database related actions that you want to perform to fill
 up the database with default items. This way you don&#8217;t have to go into 
the Rails console or database to manually enter values each time you 
want to reset your database. In this seeds file, we created 2 roles, 2 
users, and made a loop that created 5 sample book entries. </p>



<h4>Opening the Database<br></h4>



<p>You can check to see if these values were entered into the database successfuly by running the following command to open your database: </p>



<pre class="wp-block-preformatted">sqlitebrowser db/development.sqlite3
</pre>



<p>To browse a table, right click on it and click on 
Browse Table. The books table should have 5 entries, Roles should have 
2, Users 2, and User_Roles. </p>



<p><strong>Note:</strong></p>



<p>The
 &#8216;roles&#8217; table should include the roles that we created, admin and 
normal_user. Each of these should be associated with an id such as 1 and
 2. Each user in the &#8216;users&#8217; table should also have an id associated 
with it. The &#8216;user_roles&#8217; table should have a column called user_id and 
role_id. This is the table that lets the application know which users 
(their ids) are associated with which roles (their ids). In this case, 
it should say that User with an id of 1 (the admin user we created) 
should have the role with an id of 1 (the admin role).</p>



<h4>Authorization</h4>



<p>Now we can begin to implement authorization by permitting certain actions. Lets start by going into the /app/models/user.rb file and add some role checking functions: </p>



<pre class="wp-block-preformatted">def admin?
&nbsp;&nbsp;&nbsp;has_role?(:admin)
end

def normal_user?
&nbsp;&nbsp;&nbsp;has_role?(:normal_user)
end
</pre>



<p>The user.rb file should look like this: <a href="https://gist.github.com/mt9304/1d2e6a8bfeeb17719bc54320317b221f" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/1d2e6a8bfeeb17719bc54320317b221f</a></p>
<script src="https://gist.github.com/mt9304/1d2e6a8bfeeb17719bc54320317b221f.js"></script>



<p>These
 functions allow use to check if a user has a certain role. We can use 
this in the /app/models/ability.rb file which helps use define what each
 user can do on the site. Open up the ability.rb file and edit it so 
that it looks like this: <a href="https://gist.github.com/mt9304/f6aaa6e0b839aaf35450a85105728c14" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/f6aaa6e0b839aaf35450a85105728c14</a></p>
<script src="https://gist.github.com/mt9304/f6aaa6e0b839aaf35450a85105728c14.js"></script>



<p>In
 this case, we will allow users to view and create new books, admins can
 manage (create, delete, edit, read) everything, and unauthenticated 
users will only be able to read. For more information on defining 
abilities, please visit: <a href="https://github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities" target="_blank" rel="noreferrer noopener">https://github.com/CanCanCommunity/cancancan/wiki/Defining-Abilities</a></p>



<h4>Controller</h4>



<p>Now we just have to go into our /app/controllers/api/books_controller.rb file to make sure our controller is checking for permissions before allowing any actions to be performed. At the top (under class BooksController and above the index method), add the following: </p>



<pre class="wp-block-preformatted">load_and_authorize_resource
before_action :authenticate_user!, except: [:index]
</pre>



<p>The controller should now look like this: <a href="https://gist.github.com/mt9304/f8deb96abb3acc0f64d30c47716143e5" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/f8deb96abb3acc0f64d30c47716143e5</a></p>
<script src="https://gist.github.com/mt9304/f8deb96abb3acc0f64d30c47716143e5.js"></script>



<p><strong>Note: </strong></p>



<p>The
 before_action line will direct users to the login screen if they try to
 access any method in the books controller except for :index. You can 
test this out by logging out and browsing to localhost:3000/api/books to
 see the list of books (this URL is the :index function). Now try to 
visit localhost:3000/api/books/1 (the :show function) and it should 
redirect you to the login page. Once you login, you should be able to 
see the particular book with 1 as the id. </p>



<p>After this, let&#8217;s open up /app/controllers/application_controller.rb and add these lines into the class: </p>



<pre class="wp-block-preformatted">rescue_from CanCan::AccessDenied do |exception|
&nbsp;redirect_to root_url
end
</pre>



<p>This will redirect the user to the home page when 
they try to do something that their user role is not permitted to do. 
Now we have a basic authorization process for the website!</p>



<p><strong>Note: </strong></p>



<p>Right now we can test out the read/get functions like :index and :show, but we haven&#8217;t went over the ways of put and post options (creating, deleting, or editing). We will implement these functions in the next article where we implement React for the front-end of the website. </p>



<h4>Navigation</h4>



<p>The next article can be found <a href="/rails-with-react">here</a>. Previous article is <a href="/rails-authentication">here</a>. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-authorization/">4. Ruby on Rails Authorization</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>3. Ruby on Rails Authentication</title>
		<link>https://www.mediocreinventions.com/rails-authentication/</link>
		<pubDate>Sun, 30 Dec 2018 03:06:25 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Rails Authentication/Authorization]]></category>
		<category><![CDATA[Authentication]]></category>
		<category><![CDATA[devise]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[Ruby on Rails]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=691</guid>
		<description><![CDATA[<p>Note:A more detailed article on this topic can be found here: https://www.nopio.com/blog/authentication-authorization-rails/ Intro If you have followed through the previous article, then we should now have a basic API for our Books. Since our website now has functions, we should add authentication features so users can sign up and login. &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-authentication/">3. Ruby on Rails Authentication</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<p><strong>Note:</strong><br>A more detailed article on this topic can be found here: <a href="https://www.nopio.com/blog/authentication-authorization-rails/">https://www.nopio.com/blog/authentication-authorization-rails/</a><br></p>



<h2>Intro</h2>



<p>If you have followed through the previous article, then we should now have a basic API for our Books. Since our website now has functions, we should add authentication features so users can sign up and login. This can help us track users and implement authorization later on.</p>



<p>Let&#8217;s generate some components needed for this:</p>



<pre class="wp-block-preformatted">rails generate devise:install</pre>



<p>Generate the views for the authentication pages:</p>



<pre class="wp-block-preformatted">rails g devise:views</pre>



<p><strong>Note:</strong></p>



<p>Devise is the gem (plugin/library for rails) that has a bunch of pre-built functions we can use to implement authentication.</p>



<h2>Users</h2>



<p>We can now run the follow to generate the User model for our database:</p>



<pre class="wp-block-preformatted">rails generate devise User<br>
rake db:migrate</pre>



<p>You should now have a basic login screen for the website! To check, restart your rails server and visit http://localhost:3000/users/sign_in</p>



<p>Click on Sign up and create a user</p>



<p>After you create the user, you should be automatically signed in. Or you can sign in through /users/sign_in. If you are already signed in, it will just take you to the home page. Now we just need a way to let users know that they are signed in.</p>



<h3>Navigation Bar<br></h3>



<p>Let&#8217;s add a navigation bar at the top of the page for User options like signing in and signing out. Go to /app/views/layouts/ and open up your application&#8217;s layout file: application.html.erb. Then change the contents so that it looks like this: <a href="https://gist.github.com/mt9304/d2bb86ad1b3e50f28bf4a14b4f344c3b">https://gist.github.com/mt9304/d2bb86ad1b3e50f28bf4a14b4f344c3b</a></p>



<script src="https://gist.github.com/mt9304/d2bb86ad1b3e50f28bf4a14b4f344c3b.js"></script>



<p>Now, we can add some CSS to style the page just a bit. Open up /app/assets/stylesheets/ and rename the application.css to application.scss. Then edit the contents in there to include bootstrap and add some styling: <a href="https://gist.github.com/mt9304/e9087f054ee8fb773f0180caeb75ab5c">https://gist.github.com/mt9304/e9087f054ee8fb773f0180caeb75ab5c</a></p>



<script src="https://gist.github.com/mt9304/e9087f054ee8fb773f0180caeb75ab5c.js"></script>



<p><strong>Notes:</strong></p>



<p>The @import bootstrap line lets us use a very popular css library. More information on Bootstrap here: http://getbootstrap.com/</p>



<p>It essentially has a bunch of pre-built styles we can use to make a website so we don&#8217;t have to style it from scratch.</p>



<p>When you start the server and look at the website, you should now see a navigation bar at the top with a Dropdown menu for Users at the top right. Right now, clicking it won&#8217;t do anything, because we have not added the appropriate JavaScript to handle this action. In this case, we can use Bootstrap&#8217;s JavaScript library to help us handle dropdown menues.</p>



<p>Go to /app/assets/javascripts/application.js and add //= require bootstrap-sprockets to the very bottom of the page and save. Now when you click on the User button at the top right, you should be able to see the menu drop down. This should show actions such as Login and Logout. These buttons should work already since the Devise gem has taken care of the authentication functions for us, but since we want users to know when they are logged in, we will make some changes to this menu.</p>



<h4>Checking if logged in<br></h4>



<p>Let&#8217;s make it so that you will only see the Login button if you are not already signed in. Similarly, the Logout button should only appear if the user is already signed in. To do this, let&#8217;s open up the /app/views/layouts/application.html.erb file again and make some changes to the user menu section. (around lined 32):</p>



<pre class="wp-block-preformatted">&lt;% if user_signed_in? %&gt;<br>   &lt;%= link_to "Edit profile", edit_user_registration_path %&gt;<br>&lt;% else %&gt;<br>   &lt;%= link_to "Sign up", new_user_registration_path %&gt;<br>   &lt;%= link_to "Login", new_user_session_path %&gt;<br>&lt;% end %&gt;<br>&lt;% if user_signed_in? %&gt;<br>   &lt;%= link_to "Logout", destroy_user_session_path, method: :delete %&gt;<br>&lt;% end %&gt;</pre>



<p>Your application.html.erb file should now look something like this: <a href="https://gist.github.com/mt9304/3a87440097d5de9e16ef40c704270528">https://gist.github.com/mt9304/3a87440097d5de9e16ef40c704270528</a></p>



<script src="https://gist.github.com/mt9304/3a87440097d5de9e16ef40c704270528.js"></script>



<p><strong>Notes:</strong></p>



<p>In Ruby on Rails, the .html part of the file name shows it is an HTML file, and the erb extension at the end let&#8217;s the server know that this can accept Ruby code as well. The parts in between the angle bracket/percentage signs (&lt;% some_code %&gt;) are to indicate Ruby code, which is usually programming logic that HTML files would otherwise not be able to use. The brackets without &#8216;=&#8217; signs like &lt;% some_code %&gt; are indicators of Ruby code that do not need to render anything, while the &#8216;=&#8217; signs like &lt;%= some_code %&gt; indicates that something should be rendered. In this case, we can see that the &#8220;if else&#8221; logic of checking a user&#8217;s authentication does not need rendering, while the actual links to the Login/Logout functions need rendering, since they are actual buttons on the page.</p>



The code that says something like link_to and new_user_session_path are just pre-built functions to make it more convenient (it also looks more readable, since it spells out exactly what it does). The Login line of code &lt;%= link_to &#8220;Login&#8221;, new_user_session_path %&gt; is essentially just <a href="/users/sign_in">Login</a> and you can try replacing this just to see for yourself.



<h4>Logging in<br></h4>



<p>When you login now, you should be able to see the Logout button, and the Sign in button would no longer be there. This allows users to see if they are logged in or out. Now if you ever want content that only users who are logged in should see, you know to just wrap it with these one of these lines: &lt;% if user_signed_in? %&gt;   Yay, you are logged in!&lt;% end %&gt;</p>



<p>This is how the login page should look like now:</p>



<figure class="wp-block-image"><img src="https://localhost/wp-content/uploads/image.png" alt="" class="wp-image-872" srcset="https://www.mediocreinventions.com/wp-content/uploads/image.png 1014w, https://www.mediocreinventions.com/wp-content/uploads/image-300x130.png 300w, https://www.mediocreinventions.com/wp-content/uploads/image-768x334.png 768w" sizes="(max-width: 1014px) 100vw, 1014px" /></figure>



<p>In the next article, we will go through Authorization, which means giving different users certain roles (such as Admin or Client) and allowing each of these roles to see different content. </p>



<h4>Navigation</h4>



<p>The next article can be found <a href="/rails-authorization">here</a>. Previous article is <a href="http://ruby-on-rails-api">here</a>. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-authentication/">3. Ruby on Rails Authentication</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>2. Creating the Ruby on Rails API</title>
		<link>https://www.mediocreinventions.com/ruby-on-rails-api/</link>
		<pubDate>Sun, 30 Dec 2018 02:58:49 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Rails Authentication/Authorization]]></category>
		<category><![CDATA[Ruby on Rails With React]]></category>
		<category><![CDATA[Ruby on Rails, Nginx and Puma]]></category>
		<category><![CDATA[API]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[Ruby on Rails]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=641</guid>
		<description><![CDATA[<p>Intro Now that we have the environment setup, we can finally start building our API for the web application. This article will go through how to create a basic REST API for perform CRUD (Create, Read, Update, Delete) operations. Start Lets start by creating the home page. Generate files needed &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/ruby-on-rails-api/">2. Creating the Ruby on Rails API</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>Now that we have the environment setup, we can finally start building our API for the web application. This article will go through how to create a basic REST API for perform CRUD (Create, Read, Update, Delete) operations. </p>



<h2>Start</h2>



<p>Lets start by creating the home page. Generate files needed for the home page by typing:&nbsp;</p>



<pre class="wp-block-preformatted">rails g controller home_page index
</pre>



<p>Create the resources for an object called book.&nbsp;</p>



<pre class="wp-block-preformatted">rails g resource book title author:text description:text pages:integer published:date
</pre>



<p>Migrate the database</p>



<pre class="wp-block-preformatted">rake db:migrate
</pre>



<p><strong>Notes:</strong></p>



<p>If this is the first 
time you are seeing the above commands, here is what it is doing in a 
nutshell for our purposes. &#8216;g&#8217; is short for generate, so in the commands
 above we are telling rails to generate things such as a controller or 
resource. The index part is just the page itself (index.html) where you 
can write HTML in and the controller allows for this page to interact 
with the server (to get information from the database). Generating the 
resource in this case allows us to add the routes (or URL paths) for 
getting information about the book. This book is then set represented by
 a title, author (in text format), description, number of pages (in 
integer format), and when it was published (in date format).&nbsp;</p>



<h4>Routes</h4>



<p>Let&#8217;s add the routes for the api we are making. In the config/routes.rb file, add the lines:&nbsp;</p>



<pre class="wp-block-preformatted">root 'home_page#index'
namespace :api do
&nbsp;resources :books
end
</pre>



<p>The routes.rb file should look like this:&nbsp;<a rel="noreferrer noopener" href="https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf" target="_blank">https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf</a><br><br></p>
<script src="https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf.js"></script>



<h4>Controller</h4>



<p>Now let&#8217;s replace the contents in the books controller in /app/controllers/books_controller.rb to be:&nbsp;</p>



<pre class="wp-block-preformatted">module Api
&nbsp;class EventsController &lt; ApplicationController
&nbsp;&nbsp;def index
&nbsp;&nbsp;&nbsp;render json: Book.all
&nbsp;&nbsp;end
&nbsp;end
end
</pre>



<p>Now go into /app/controllers and create an folder 
called api, then move the books_controller under there. New path should 
be /app/controllers/api/books_controller.rb</p>



<p>Any API related controllers should now go in that folder.&nbsp;</p>



<p><strong>Note:</strong></p>



<p>Putting
 books under the :api namespace and api folder allows you to access the 
resource in the URL after /api. So in this case, it would be <a href="http://website.com/api/books" target="_blank" rel="noreferrer noopener">website.com/api/books</a>.
 Making books a resource by writing &#8220;resources :book&#8221; allows users to 
access books through its RESTful URLs. Below are the following URLs you 
will be able to use to get data about the books. Since we have the index
 method in the controller and views for books, you should be able to 
visit that page (we haven&#8217;t added any book records in the database yet, 
so these URLs wouldn&#8217;t return anything right now).&nbsp;</p>



<pre class="wp-block-preformatted">GET	/api/books(.:format)			api/books#index<br>POST	/api/books(.:format)			api/books#create<br>GET 	/api/books/new(.:format)		api/books#new<br>GET 	/api/books/:id/edit(.:format) 		api/books#edit<br>GET 	/api/books/:id(.:format) 		api/books#show<br>PATCH 	/api/books/:id(.:format) 		api/books#update<br>PUT 	/api/books/:id(.:format) 		api/books#update<br>DELETE 	/api/books/:id(.:format)</pre>



<p>More information on REST here: <a rel="noreferrer noopener" href="https://www.restapitutorial.com/lessons/restfulresourcenaming.html" target="_blank">https://www.restapitutorial.com/lessons/restfulresourcenaming.html</a></p>



<p>Here are the basics that you need to know in Rails regarding these APIs and routes:&nbsp;</p>



<p>&#8211; Controllers will have a few standard methods:&nbsp;</p>



<p>	index method for showing all the books (/books)</p>



<p>	create method for creating a new book (/books/new)</p>



<p>	show method for showing one particular book (/books/id where id is the book&#8217;s id in the database)</p>



<p>	update method for updating an existing book (/books/id/edit)</p>



<p>	destroy method for deleting an existing book (/books/id/ but with a DELETE method)</p>



<p>Here
 we will fill out the rest of the controller methods to allow for the 
above behavior through the API. Change your books controller so that it 
is:&nbsp;<a href="https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc</a></p>
<script src="https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc.js"></script>



<h2>Adding Books</h2>



<p>Now let&#8217;s add some Books to our database so that we can test out the API. Go into the Rails console by typing in the terminal:&nbsp;</p>



<pre class="wp-block-preformatted">rails c
</pre>



<p>(Make sure you are in the project&#8217;s folder)</p>



<p>The
 Rails console lets you run Ruby code in. real time to make changes to 
your application. In this case, we want to add a new Book, so let&#8217;s type
 in:&nbsp;</p>



<pre class="wp-block-preformatted">b = Book.create :title =&gt; "How To Cook", :author =&gt; "Bob", :description =&gt; "Teaches you how to cook. ", :pages =&gt; 20, :published =&gt; "2018-11-03"
b2 = Book.create :title =&gt; "How To Bake", :author =&gt; "Bill", :description =&gt; "Teaches you how to bake. ", :pages =&gt; 15, :published =&gt; "2018-02-03"
</pre>



<p><strong>Note:</strong></p>



<p>While in the console, type &#8220;quit&#8221; to exit.&nbsp;</p>



<p>This
 will create 2 entries in our database in the Books table. The database 
right now is stored in /db/development.sqlite3. You can open this with 
sqlitebrowser.&nbsp;</p>



<p>If you haven&#8217;t downloaded it yet, you can install it by running these commands in the terminal:&nbsp;</p>



<pre class="wp-block-preformatted">sudo add-apt-repository ppa:linuxgndu/sqlitebrowser-testing
sudo apt-get update &amp;&amp; sudo apt-get install sqlitebrowser
</pre>



<p>Then you can go into your project folder and open it with the sqlitebrowser command:</p>



<pre class="wp-block-preformatted">sqlitebrowser db/development.sqlite3
</pre>



<p>You can right click the Books option and see your 
entries in there. Now you can try out the API urls above to see it in 
action (Make sure you start your server first by running: rails s). For 
example, go to localhost:3000/api/books/1</p>



<p>You should receive a page with information about one of the books we just created in JSON format. The &#8220;1&#8221; at the end of the URL represent&#8217;s the ID, which is found in the ID column of the Books table in the database. So if you go to localhost:3000/api/books/2 then it will give you information on the other book. </p>



<h4>Navigation</h4>



<p>The next article can be found <a href="/rails-authentication">here</a>. Previous article is <a href="/rails-setup">here</a>. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/ruby-on-rails-api/">2. Creating the Ruby on Rails API</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>1. Setting up Ruby on Rails Environment</title>
		<link>https://www.mediocreinventions.com/rails-setup/</link>
		<pubDate>Sun, 30 Dec 2018 02:35:16 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Rails Authentication/Authorization]]></category>
		<category><![CDATA[Ruby on Rails With React]]></category>
		<category><![CDATA[Ruby on Rails, Nginx and Puma]]></category>
		<category><![CDATA[React]]></category>
		<category><![CDATA[Ruby]]></category>
		<category><![CDATA[Ruby on Rails]]></category>
		<category><![CDATA[setup]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=531</guid>
		<description><![CDATA[<p>Intro In this series of tutorials, we will go through how to build a Rails application with authentication/authorization. We will briefly go over what each function does and set up a bare-bones application template to use with React.js.This particular article will focus on just setting up the environment so that &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-setup/">1. Setting up Ruby on Rails Environment</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this series of tutorials, we will go through how to build a Rails application with  authentication/authorization. We will briefly go over what each function does and set up a bare-bones application template to use with React.js.This particular article will focus on just setting up the environment so that we can start the project. </p>



<p>To  make sure you are on the same page, you can start on a brand new virtual machine running Ubuntu 18.04. You can download virtual machines  from here:&nbsp;</p>



<p><a href="https://www.vmware.com/ca.html" target="_blank" rel="noreferrer noopener">https://www.vmware.com/ca.html</a> for VMware (free for Windows) or <a href="https://www.virtualbox.org/" target="_blank" rel="noreferrer noopener">https://www.virtualbox.org/</a> for VirtualBox (free for MacOS and Windows).&nbsp;</p>



<p>Ubuntu Desktop operating system can be download here: <a href="https://www.ubuntu.com/download" target="_blank" rel="noreferrer noopener">https://www.ubuntu.com/download</a> or if 18.04 is not the latest version anymore, you can also check here: <a href="http://old-releases.ubuntu.com/releases/" target="_blank" rel="noreferrer noopener">http://old-releases.ubuntu.com/releases/</a></p>



<h2>Start</h2>



<p>To start, we will install the dependencies needed to install Ruby on Rails:&nbsp;</p>



<p>Open
 up the terminal by pressing ctrl + alt + T and type in the following to
 start installing (make sure you wait for each command to finish before 
running the next):&nbsp;</p>



<h3>Install Git for version control</h3>



<pre class="wp-block-preformatted">sudo apt install git
</pre>



<h3>Install libraries and other dependencies</h3>



<pre class="wp-block-preformatted">sudo apt update
sudo apt install curl
sudo apt install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm-dev
</pre>



<h3>Installs RVM for managing Ruby environments</h3>



<pre class="wp-block-preformatted">git clone https://github.com/rbenv/rbenv.git ~/.rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' &gt;&gt; ~/.bashrc
echo 'eval "$(rbenv init -)"' &gt;&gt; ~/.bashrc
git clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build
</pre>



<p><strong>Note:</strong></p>



<p>If at any point the 
terminal says you have not installed or function is not found when you 
have just installed the program succesfully, an easy workaround is just 
close the terminal and open it again. You can also type source ~/.bashrc
 or source ~/.bash_profile to see if it works. If it still doesn&#8217;t work,
 make sure the program was properly installed and there were no error 
messages in the logs.&nbsp;</p>



<h3>Continue setting up ruby environment</h3>



<pre class="wp-block-preformatted">rbenv install 2.5.1
rbenv global 2.5.1
echo "gem: --no-document" &gt; ~/.gemrc
gem install rails -v 5.2.0
rbenv rehash
</pre>



<h3>Install NodeJS (JavaScript Runtime environment)</h3>



<pre class="wp-block-preformatted">cd /tmp
\curl -sSL https://deb.nodesource.com/setup_6.x -o nodejs.sh
cat /tmp/nodejs.sh | sudo -E bash -
sudo apt install -y nodejs
</pre>



<h3>Cleanup</h3>



<p>Almost done the setup, let&#8217;s do some cleaning up and updating just to be sure</p>



<pre class="wp-block-preformatted">cd ~/.rbenv
git pull
cd ~
sudo apt install postgresql postgresql-contrib libpq-dev
sudo apt update
</pre>



<p>Now we should be ready to begin creating the app.</p>



<h2>Creating The App</h2>



<p>Create the application</p>



<pre class="wp-block-preformatted">rails new rails_template
cd rails_template
</pre>



<p>Make sure you have installed a text editor so that we can edit some files For Sublime text install, do:&nbsp;</p>



<pre class="wp-block-preformatted">wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
sudo apt-get update
sudo apt-get install sublime-text
</pre>



<p>For Vim install, do:&nbsp;</p>



<pre class="wp-block-preformatted">sudo apt install vim
</pre>



<h4>Gemfile</h4>



<p>Then open up the Gemfile edit it to include the proper gems. In particular, we are going to need Devise for authentication and CanCanCan for authorization. Authentication would mean the parts responsible for logging in a user, whereas authorization would be permissions for which types of users (roles) are allowed to do certain actions. These are usually very important for people to define in projects, since you wouldn&#8217;t want a guest to be able to access Admin level functions (such as deleting users).&nbsp;</p>



<p>The Gemfile should look like this: <a href="https://gist.github.com/mt9304/78c1ab6274d92629758b05c258def17e" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/78c1ab6274d92629758b05c258def17e</a></p>
<script src="https://gist.github.com/mt9304/78c1ab6274d92629758b05c258def17e.js"></script>



<p><strong>Note:&nbsp;</strong></p>



<p>If you are unfamiliar with gems, you can think of them as additional programs, plugins/extensions, or libraries that the application can use. </p>



<h4>Turbo Links<br></h4>



<p>We also need to remove Turbo Links since it can cause  issues with some of the other technologies we are going to use later  on. Remove the &#8220;//= require turbolinks&#8221; line from  app/assets/javascripts/application.js. Remove the two  &#8220;data-turbolinks-track&#8221; =&gt; true hash key/value pairs from your  app/views/layouts/application.html.erb. </p>



<p>
The application.html.erb file  should look like this: <a rel="noreferrer noopener" href="https://gist.github.com/mt9304/6028e18397f0af7748d3df76fe4b9292" target="_blank">https://gist.github.com/mt9304/6028e18397f0af7748d3df76fe4b9292ï»¿</a></p>
<script src="https://gist.github.com/mt9304/6028e18397f0af7748d3df76fe4b9292.js"></script>



<p><strong>Note:&nbsp;</strong></p>



<p>The
 application.html.erb file here determines how your pages should look. 
In general, all your pages in this application will use the HTML here 
for its layout, and the &lt;%= yield %&gt; tag is the part that changes 
depending on the page. </p>



<h4>Database</h4>



<p>After this, let&#8217;s run the following to install our database</p>



<pre class="wp-block-preformatted">sudo apt install libsqlite3-dev
sudo apt install sqlite3
</pre>



<p>We will change to using Postgres database later</p>



<p><strong>Note:</strong></p>



<p>Sqlite
 is a lightweight database good for development, but not that great at 
handling a lot of connections. So we will use Postgresql later on when 
we move it into production.&nbsp;</p>



<p>Now that we have saved the new Gemfile, run the following command inside the application&#8217;s directory to install the gems:&nbsp;</p>



<pre class="wp-block-preformatted">bundle install
</pre>



<h4>React</h4>



<p>Let&#8217;s generate the files for React so we can use them later on:&nbsp;</p>



<pre class="wp-block-preformatted">rails g react:install
</pre>



<p>After everything has been installs, run the 
following to start the server, then visit localhost:3000 to see if the 
application started successfully.&nbsp;</p>



<pre class="wp-block-preformatted">rails s
</pre>



<p>If all is successful so far, it should say Yay! you&#8217;re on Rails!</p>



<p>To stop the application server from running, press <strong>CTRL+ C</strong> at the terminal to stop the process.&nbsp;</p>



<p>Now that the application is up and running, we can start making a basic API. </p>



<h4>Navigation</h4>



<p>The next article can be found <a href="/ruby-on-rails-api">here</a>. <br></p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-setup/">1. Setting up Ruby on Rails Environment</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
