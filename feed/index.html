<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Mediocre Inventions</title>
	<atom:link href="https://www.mediocreinventions.com/feed/" rel="self" type="application/rss+xml" />
	<link>https://www.mediocreinventions.com/</link>
	<description></description>
	<lastBuildDate>Mon, 11 Feb 2019 00:35:02 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.0.1</generator>
	<item>
		<title>5. Deploying WordPress To Heroku</title>
		<link>https://www.mediocreinventions.com/deploying-wordpress-to-heroku/</link>
		<pubDate>Mon, 28 Jan 2019 07:56:25 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Wordpress Free Hosting Workaround]]></category>
		<category><![CDATA[Wordpress Hosting Options]]></category>
		<category><![CDATA[cleardb]]></category>
		<category><![CDATA[heroku]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">https://localhost/?p=2412</guid>
		<description><![CDATA[<p>Intro In this article, we will deploy our WordPress website onto Heroku, a web application hosting service. We are using Heroku because it has a free plan, but it does come with a couple of drawbacks. We will also go over the limitations of this in this article. Heroku Let&#8217;s &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/deploying-wordpress-to-heroku/">5. Deploying WordPress To Heroku</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this article, we will deploy our WordPress website onto Heroku, a web application hosting service. We are using Heroku because it has a free plan, but it does come with a couple of drawbacks. We will also go over the limitations of this in this article. <br></p>



<h2>Heroku</h2>



<p>Let&#8217;s start by installing Heroku&#8217;s command line interface by running: </p>



<pre class="wp-block-preformatted">sudo snap install --classic heroku</pre>



<p>Heroku is a free hosting service that we will use to host our website. The service is extremely convenient to use, but the free tier has a couple of limitations and is usually not suitable for a production/customer facing website hosting. Here are some of the notable downside for the free tier: </p>



<ul><li>If the application is inactive for a while, it will go to sleep. When a user visits the application/website for the first time, it will take more time to load and wake up. </li><li>The MySQL database size is only 5mb. </li><li>It has an ephemeral file system. This just means that any file changes or new files uploaded on the server will be undone after the server restarts. This means that users should not be uploading files on here through WordPress or making any changes tothe files. </li><li>Limited performance. </li></ul>



<p>However, since we will only be using the website here as a development website, these limitations shouldn&#8217;t be too much. If you database does happen to get big and need to go over the 5mb (even with the WordPress database optimizing addon), you have the option to upgrade to their paid tier to significantly increase the limits. </p>



<h3>Heroku Setup</h3>



<p>Make sure you sign up on their website: https://www.heroku.com/<br>
Once you have signed up, you should be able to go to the <a href="https://dashboard.heroku.com/apps">dashboard</a> and create a new application. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/heroku0-1024x84.png" alt="" class="wp-image-2372" srcset="https://www.mediocreinventions.com/wp-content/uploads/heroku0-1024x84.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/heroku0-300x25.png 300w, https://www.mediocreinventions.com/wp-content/uploads/heroku0-768x63.png 768w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>Enter the name of your new application and in the Deploy section, choose the deployment method that you prefer. For this tutorial, I will choose the Github option to simplify things. This makes it so that every time you move your changes onto Github, it will also move the changes onto Heroku, where we will be hosting our development site. To enable this automatic process, go down to the Automatic deploys section and enable it on the master branch. We won&#8217;t go into detail about Github&#8217;s branches, but you can read more about it here: https://guides.github.com/introduction/flow/</p>



<h3>Heroku Database</h3>



<p>Now we need to setup our database on Heroku. Go to the Resources section and click on Find more add-ons. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/heroku1-1024x385.png" alt="" class="wp-image-2373" srcset="https://www.mediocreinventions.com/wp-content/uploads/heroku1-1024x385.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/heroku1-300x113.png 300w, https://www.mediocreinventions.com/wp-content/uploads/heroku1-768x289.png 768w, https://www.mediocreinventions.com/wp-content/uploads/heroku1.png 1528w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>In the Data Stores section, find the addon that says ClearDB MySQL and click it. Once you are on that addon&#8217;s page, click on Install ClearDB MySQL and enter your application&#8217;s name to install it for the app (make sure the plan is on Ignite &#8211; Free). </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/heroku2-1024x474.png" alt="" class="wp-image-2374" srcset="https://www.mediocreinventions.com/wp-content/uploads/heroku2-1024x474.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/heroku2-300x139.png 300w, https://www.mediocreinventions.com/wp-content/uploads/heroku2-768x355.png 768w, https://www.mediocreinventions.com/wp-content/uploads/heroku2.png 1492w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>ClearDB</h3>



<p>Once you have installed the database, you can access this on the Resources tab in Heroku and select ClearDB &#8211; MySQL. This should take you to your database&#8217;s page on ClearDB. From here, you can see your database in the Community Edition tab. It should be called something like heroku_4536dfb43tbdf. Click into this and then go to the System Information tab. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/cleardb0-1024x195.png" alt="" class="wp-image-2368" srcset="https://www.mediocreinventions.com/wp-content/uploads/cleardb0-1024x195.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/cleardb0-300x57.png 300w, https://www.mediocreinventions.com/wp-content/uploads/cleardb0-768x146.png 768w, https://www.mediocreinventions.com/wp-content/uploads/cleardb0.png 1559w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>From here you can see your database&#8217;s username and password. Make sure to make note of this as we will be using it later. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/cleardb1-1024x327.png" alt="" class="wp-image-2369" srcset="https://www.mediocreinventions.com/wp-content/uploads/cleardb1-1024x327.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/cleardb1-300x96.png 300w, https://www.mediocreinventions.com/wp-content/uploads/cleardb1-768x245.png 768w, https://www.mediocreinventions.com/wp-content/uploads/cleardb1.png 1180w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3>Local Database</h3>



<p>If you haven&#8217;t already, you can install MySQL Workbench to access your database through a GUI: </p>



<pre class="wp-block-preformatted">sudo apt install mysql-workbench</pre>



<p>You can then start the program by finding it on the launcher or typing mysql-workbench in the terminal. Once opened, you should be able to click into the Local instance to access your local database. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/mysql0.png" alt="" class="wp-image-2375" srcset="https://www.mediocreinventions.com/wp-content/uploads/mysql0.png 726w, https://www.mediocreinventions.com/wp-content/uploads/mysql0-300x187.png 300w" sizes="(max-width: 726px) 100vw, 726px" /></figure>



<h3>Database Size</h3>



<p>Since our database on Heroku only allows for 5MB, let&#8217;s open up our local instance to check its size. Once opened, the bottom left should have a SCHEMAS section that contains your database. Right-click your database and select &#8220;Set as Default Schema&#8221;. Then click on the textbox in the middle to type in the Query tab and paste this in the box:</p>



<pre class="wp-block-preformatted">SELECT table_schema AS "Database", <br>
ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS "Size (MB)" <br>
FROM information_schema.TABLES <br>
GROUP BY table_schema;
</pre>



<p>Then go to Query at the top and select &#8220;Execute (All of Selection)&#8221; or press Shift + Ctrl + Return. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/mysql1.png" alt="" class="wp-image-2376" srcset="https://www.mediocreinventions.com/wp-content/uploads/mysql1.png 806w, https://www.mediocreinventions.com/wp-content/uploads/mysql1-300x180.png 300w, https://www.mediocreinventions.com/wp-content/uploads/mysql1-768x461.png 768w" sizes="(max-width: 806px) 100vw, 806px" /></figure>



<p>A results table should show up showing the size of the database right beside the name of your database. If this is under 5MB then we are good to go! If not, then we may have to delete some unnecesarry data from there. You can make use of the &#8220;Optimize Database after Deleting Revisions&#8221; WordPress plugin to delete a lot of data from your database. A lot of the space can be a result of old revisions of posts that you no longer need. </p>



<p>If the above method still does not reduce the database tp below 5MB, then you may need to upgrade the database to a paid tier to continue. </p>



<h3>ClearDB Remote Database</h3>



<p>Let&#8217;s press the Home icon on the top left of MySQL Workbench now and try to connect to our ClearDB database that we just cretaed on Heroku. Click on the &#8220;+&#8221; icon next to the title that says &#8220;MySQL Connections&#8221; to start adding another connection. </p>



<figure class="wp-block-image"><img src="http://dev.mediocreinventions.com/wp-content/uploads/mysql2.png" alt="" class="wp-image-2377" srcset="https://www.mediocreinventions.com/wp-content/uploads/mysql2.png 1022w, https://www.mediocreinventions.com/wp-content/uploads/mysql2-300x208.png 300w, https://www.mediocreinventions.com/wp-content/uploads/mysql2-768x532.png 768w" sizes="(max-width: 1022px) 100vw, 1022px" /></figure>



<p>To get the Hostname, go back to your website folder in your terminal and run the following Heroku command (make sure you have installed the Heroku CLI as mentioned at the top): </p>



<pre class="wp-block-preformatted">heroku config --app yourappname</pre>



<p>Remember to replace yourappname with the name of your application on Heroku. You should get an output that says CLEARDB_DATABASE_URL and a bunch of text after it. The Hostname is the value after the @ sign and before the forward slash &#8220;/&#8221;. It might look something like us-cdbr-iron-east-03.cleardb.net</p>



<h3>Connecting</h3>



<p>The port should be 3305, username/password should be the one we got from the System Information tab on the ClearDB website earlier. The Default Schema is the database name on ClearDB, which should look something like heroku_resgerhreshrhhs3542. It can be found on the System Information tab as well as the part from the heroku config command after the forward slash and before the question mark. Connecting to it may prompt a password, which is the one from the System Information tab. </p>



<p>Once you have tested and saved the connection, the MySQL-Workbench home page should now have an extra tile to connect to this database now. Click into it to make sure everything connects properly. </p>



<h3>Heroku Config Variables</h3>



<p>Now that we have our ClearDB credentails from above, we need to let Heroku know this information. Heroku also similar to our Apache&#8217;s environment variables, Heroku has a section called Config Variables where it gets these values. Go into the Heroku Dashboard again and go to the Settings section. There should be a button called Reveal Config Vars. Click this to reveal the variables. </p>



<p>By default, the ClearDB database URL should be populated already. If not, you can get this URL by running the &#8220;heroku config &#8211;app yourappname&#8221; command again. Since we specified the named of the environment variables in the wp-config.php file earlier (such as DB_NAME, DB_USER, DB_PASSWORD, DB_HOST), we can add this easily in the Reveal Config Vars section. </p>



<h3>Double Checking</h3>



<p>Make sure to add all the environment variables that we have defined in this area and fill the values in with the ClearDB values. Double check that there are no trailing or prepended spaces in these values that are not supposed to be there.</p>



<p>Now check that your file changes are all on the remote repository on Github. You can go to your website folder and type &#8216;git status&#8217; to check if there are any changes that need to be put on there. Once everything is up to date there, you can manually deploy the changes to Heroku by going to the Heroku Dashboard &gt; Deploy and scroll to the Manual Deploy section to deploy. </p>



<h3>Pushing Database Changes</h3>



<p>Right now our ClearDB database is blank, so we want to make sure we move our local database values onto the ClearDB database. To do this, we will create a backup file from our local database, then restore it to the ClearDB one. Let&#8217;s start by creating a new folder on our machine to store the database files: </p>



<pre class="wp-block-preformatted">mkdir ~/mysql-db-files
cd ~/mysql-db-files
</pre>



<p>Make sure you don&#8217;t create these files in your website&#8217;s folder, because it contains sensitive information and can accidentally be pushed into Github if not careful. Once you are in this new folder, you can then then run the following to create the database backup file: </p>



<pre class="wp-block-preformatted">mysqldump -u root -pCHANGEME databasename &gt; nameofoutputfile.sql</pre>



<p>Make sure &#8220;root&#8221; is changed to your user and the CHANGEME value right after -p (no space in between) is your database user&#8217;s password. Remember to change the databasename to the name of your own database on your local machine. Then the part after the right angle bracket &#8220;&gt;&#8221; is just the name that you want the file to be called (make sure it ends with .sql).</p>



<h3>Double Checking</h3>



<p>Run the &#8220;ls&#8221; command just to check that your file has been created. Now we can run the next command to restore our ClearDB database using this file: </p>



<pre class="wp-block-preformatted">mysql --host=changeme --user=changeme --password=changeme --reconnect heroku_changeme &lt; nameofoutputfile.sql</pre>



<p>Make sure you change all these values to the ones we got for the ClearDB database above and the filename at the end to the one we just generated. </p>



<p><strong>Note:</strong><br>
You will likely get an error that says: </p>



<pre class="wp-block-preformatted">ERROR 1273 (HY000) at line 25: Unknown collation: 'utf8mb4_unicode_ci'</pre>



<p>If that happens, you can read about why this occurs here so you can make a more informed decision: <a href="https://stackoverflow.com/questions/42385099/1273-unknown-collation-utf8mb4-unicode-520-ci">https://stackoverflow.com/questions/42385099/1273-unknown-collation-utf8mb4-unicode-520-ci</a></p>



<p>If you just want to resolve this quick and don&#8217;t care about the details/implicates, you can just run the following: </p>



<pre class="wp-block-preformatted">sed -i -e "s/utf8mb4_unicode_ci/utf8mb4_unicode_ci/g" nameofoutputfile.sql</pre>



<p>Just make sure to change the filename at the end to the file we just generated. This command just replaces the text that is causing issues in our database file. After running it, you can try running the mysql command again to make the changes again. You can now go into MySQL-Workbench again, refresh everything and see if the ClearDB database has received all the changes. </p>



<h3>WordPress URL Values</h3>



<p>One thing to watch out for are the URLs stored in the database. While you are connected to the ClearDB database with MySQL-Workbench, run the following command to see the WordPress options table: </p>



<pre class="wp-block-preformatted">SELECT * FROM wp_options;</pre>



<p>You should notice some columns called &#8220;siteurl&#8221; and &#8220;home&#8221;. These are currently set to http://localhost, but when you have deployed this to Heroku, it would be a different URL. You can find this URL by going into the Heroku Dashboard &gt; Settings &gt; and scroll down to the Domains and Certificates section. You should be able to see your application&#8217;s URL on Heroku that looks something like https://yourappname.herokuapp.com/</p>



<p>We should replace the localhost URL in our ClearDB database to avoid issues. Run the following SQL Query on the ClearDB database to update this: </p>



<pre class="wp-block-preformatted">update wp_options<br>
set option_value = "http://yourappname.herokuapp.com"<br>
where option_name = "siteurl";<br>

update wp_options<br>
set option_value = "http://yourappname.herokuapp.com"<br>
where option_name = "home";
</pre>



<p>Make sure that this is set to http instead of https. </p>



<p><strong>Note:</strong><br>
Please note that we will not be able to use https properly in this tutorial, since if you are using a custom domain name, you will have to upgrade to a paid plan to implement SSL certificates. If you plan to use the default Herokuapp domain, then it might require more steps to get https to work. I may write an article on this in the future, but for now we will work with this. </p>



<p>Once this is done, run the SELECT command again to see if it has changed properly. </p>



<h3>Visiting the Site</h3>



<p>With all the changes being made, let&#8217;s restart our application by going to the Heroku dashboard, click on More and select Restart all Dynos. Now you can visit your site&#8217;s URL and see the error that shows up!</p>



<p>If it says something about a database error, check your wp-config.php file to make sure the database values are correct and you didnt mispell anything. Since we are using environment variables for them, you can also have to check the Reveal Config Vars section in the Heroku Settings section to see if anything was entered wrong (for example, unexpected trailing or prepended spaces). </p>



<p>If you get an error saying the site redirected too many times, check your database value for the siteurl and home columns and make sure that their values are NOT https and the domain name matches what is listed on Heroku. If you have made changes and it keeps trying to redirect you to the https site, the redirect might be cached in your browser. In that case you can either clear your browse cache or try browsing in a new incognito tab. </p>



<p>If your CSS (styling) of the website is all off, but the page loads the content, then double check that your website is serving everything through http and your current URL is using http. </p>



<p>Once the website is loading properly, you can visit the login page as normal by going into /wp-login.php or your custom login URL if you have configured it. </p>



<h3>Workflow</h3>



<p>If you have followed through everything in these series of tutorials, then these are the current things that we have: </p>



<ul><li>Local WordPress website (local database, files, server, etc). Visited through http://localhost</li><li>Github remote repository for files. </li><li>Heroku remote for files (ephemeral). </li><li>ClearDB remote database. Visited through http://yourappname.herokuapp.com/ </li></ul>



<p>Since the Heroku file system is ephemeral, you would not be able to login to the Heroku instance and upload files (pictures, media, etc) through the website. The files would just get deleted once the instance is restarted. In this case, everytime you want to make changes to the files or add posts that include pictures, you should make them on your local instance and push the file changes to Github/Heroku and the Database changes to ClearDB. </p>



<h3>Workarounds</h3>



<p>This all seems very tedious, but the benefit of this is that everything we use here in this series of tutorials is free. If you don&#8217;t like the ephemeral file system of Heroku, you can just avoid it by using AWS and spinning up your own web server to host your WordPress site. They also have a free trial for a year and a very cheap (around $3 a month) plan. </p>



<p>To make life easier for pushing database changes between your ClearDB and your local database, I have created some scripts below to help with this. </p>



<p>This one creates a database backup file and pushes it from your local database to ClearDB. It automatically modifies the siteurl and home values to your Herokuapp url. Make sure to change all the values to match yours if you want to use it (database name, user, siteurl, etc). </p>



<p>I have named the file local_to_cleardb.sh to be self explanatory. Make sure to run this in a folder NOT within your website folder by running: </p>



<pre class="wp-block-preformatted">bash local_to_cleardb.sh</pre>



<p>This file (cleardb_to_local.sh) does the opposite and creates a backup database file from your ClearDB database and restores it onto your local database. Make sure to change all the values in this as well and run it in a folder that is NOT your website folder: </p>



<pre class="wp-block-preformatted">bash cleardb_to_local.sh</pre>



<h3>Other Notes</h3>



<p>I might also look into making a plugin in the future to work around the ephemeral file system. </p>



<p>Alternatively, you can also find some plugins that save the media on Amazon S3 instead of the Website file system. The cost can be around $0.023 per GB for the first 50TB so it&#8217;s almost free. </p>



<p>Since the free Heroku instance might not be able to handle a lot of traffic, we will only use the Heroku site as a development site if you need to add some text-only posts from other devices. We will add more to the workflow in the next tutorial as well so that we can have a website that can actually handle more traffic and activity (for free!). </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/deploying-wordpress-to-heroku/">5. Deploying WordPress To Heroku</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>4. Setting Up The Git Repository</title>
		<link>https://www.mediocreinventions.com/setting-up-the-git-repository/</link>
		<pubDate>Mon, 28 Jan 2019 07:38:57 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Wordpress Free Hosting Workaround]]></category>
		<category><![CDATA[Wordpress Hosting Options]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[github]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">https://localhost/?p=2404</guid>
		<description><![CDATA[<p>Intro This article will walk through how to set up our Git repository to store our code. The repository will be used by Heroku for live deployment on a free hosting environment. We will also go over environment variables and how they are important to consider when using third party &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/setting-up-the-git-repository/">4. Setting Up The Git Repository</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>This article will walk through how to set up our Git repository to store our code. The repository will be used by Heroku for live deployment on a free hosting environment. We will also go over environment variables and how they are important to consider when using third party services to host your website files. <br></p>



<h2>Environment Variables</h2>



<p>Sometimes your files in the website folder will contain confidential information such database users and passwords (in this case, the wp-config.php file contains this confidential information). If someone happens to get ahold of the file, then our database could be in trouble (maybe someone accidentally makes the repository public or the file gets sent across an unsecure network). Since we will be putting our files on third party services, we should start by adressing this submitting any files. One possible approach to address this is by using Environment variables. In a nutshell, environment variables are variables that only the server knows. </p>



<h3>Apache Variables<br></h3>



<p>Go to your website&#8217;s folder (should be in /var/www/yourwebsite) and open up the wp-config.php file: </p>



<pre class="wp-block-preformatted">sudo nano /var/www/yourwebsite/wp-config.php</pre>



<p>You should see some lines that say something like: </p>



<pre class="wp-block-preformatted">define('DB_USER', 'yourdatabasename');<br>
define('DB_USER', 'root');<br>
define('DB_PASSWORD', 'CHANGEME');<br>
define('DB_HOST', 'localhost');
...
</pre>



<p>There should also be a similar section that defintes the AUTH_KEY, AUTH_SALT, and other key/salt variables. Since we wouldn&#8217;t want any unauthorized people to see this information, we will want to hide this information. To do this, let&#8217;s replace these values with keywords that let our server know to retrive them from the environment variables instead of the file. The lines should now look something like this: </p>



<pre class="wp-block-preformatted">define('DB_USER', getenv('DB_NAME'));<br>
define('DB_USER', getenv('DB_USER'));<br>
define('DB_PASSWORD', getenv('DB_PASSWORD'));<br>
define('DB_HOST', getenv('DB_PASSWORD'));
...
</pre>



<p>Then we will configure the Apache web server&#8217;s environment variables so that these variables have the proper values associated with them. You can open up the envvars file in the /etcs/apache2/ folder: </p>



<pre class="wp-block-preformatted">sudo nano /etc/apache2/envvars</pre>



<p>At the top of the file, there should be a section to add our environment variables. We will define these variables by entering lines like the following: </p>



<pre class="wp-block-preformatted">export DB_NAME="yourdatabasename"
export DB_USER="root"
export DB_PASSWORD="CHANGEME"
export DB_HOST="localhost"
...
</pre>



<p>Double check that you entered everything correctly and replaced the values above with your own. Then you can restart the web server and visit your webpage (localhost) to see if everything still works. </p>



<pre class="wp-block-preformatted">sudo systemctl restart apache2</pre>



<p>Remember the variable names that we set (like DB_NAME and DB_USER) since we will be using these for Heroku later. </p>



<h2>Git</h2>



<p>If you haven&#8217;t installed Git already, install it by running</p>



<pre class="wp-block-preformatted">sudo apt install git</pre>



<p>Then make sure to sign up for an account on their <a href="https://github.com/">website</a>. You can read more about Git on their website. There is also an article here that goes over it pretty well: <a href="https://kinsta.com/knowledgebase/what-is-github/">https://kinsta.com/knowledgebase/what-is-github/</a>. For our purposes, Github if the place where we will hold our website&#8217;s files and will help us with moving our changes onto the servers that will host our live websites (Heroku/Github Pages). </p>



<h3>Git repository Setup</h3>



<p>Once you have signed up for an account, create a new repository by hovering over the &#8220;+&#8221; icon on the top panel. Enter your application&#8217;s name to create your respository. This is where we will be story our application&#8217;s code/files. </p>



<figure class="wp-block-image"><img src="https://localhost/wp-content/uploads/git0-1024x54.png" alt="" class="wp-image-2370" srcset="https://www.mediocreinventions.com/wp-content/uploads/git0-1024x54.png 1024w, https://www.mediocreinventions.com/wp-content/uploads/git0-300x16.png 300w, https://www.mediocreinventions.com/wp-content/uploads/git0-768x41.png 768w, https://www.mediocreinventions.com/wp-content/uploads/git0.png 1325w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p><strong>Note:</strong><br>
You should be able to select Private Repository so that only you are able to view the code on the site (this feature was just recently made free at the time of writing this article!). Public repositories allow everyone on the internet to see it. Making it private can prevent people from seein sensitive information. For example, the wp-config.php file might contain your database name, username, and password. </p>



<p>Once you have created the repository, the page should open up with some instructions. We will run similar commands below. Make sure to change your directory to where your website files before running the commands. </p>



<pre class="wp-block-preformatted">cd /var/www/yourwebsite</pre>



<p><strong>Note:</strong><br>If you get a permission error, you can change the permissions of this folder to allow anyone to access it. This is generally not recommended due to security concerns, but since it is on our local machine this should be fine. Run the following to make the permission change: </p>



<pre class="wp-block-preformatted">chmod -R 777 /var/www/yourwebsite</pre>



<p>Then you can change directories to the website folder again.</p>



<h3>Pushing Changes<br></h3>



<p>Once you are in the folder, proceed with the Git commands: </p>



<pre class="wp-block-preformatted">git init<br>
git add .<br>
git commit -m "first commit"<br>
git remote add origin https://github.com/youruser/yourrepo.git<br>
git push -u origin master
</pre>



<p><strong>Notes:</strong></p>



<ul><li>&#8216;init&#8217; initializes the folder so that your computer knows it is version controlled (creates the local repository). </li><li>&#8216;add .&#8217; adds all the files in your folder to prepare it for loading into repositories. </li><li>&#8216;commit&#8217; saves your changes to your local repository (needs to be done before moving to the remote repository on github.com).</li><li>&#8216;remote add&#8217; adds the URL of the remote repository on Github, so that it knows where to push the changes. </li><li>&#8216;push&#8217; moves the changes onto the remote repository. </li></ul>



<p>Once you have done this, you can refresh your page and you should see your files in the Github repository. Now everytime you make changes to your files or add new files that you want to move to the live website (we have not set this up yet), you just have to go to the website directory on your computer and type the following: </p>



<pre class="wp-block-preformatted">git add .<br>
git commit -m "A message about what changes were made. "<br>
git push
</pre>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/setting-up-the-git-repository/">4. Setting Up The Git Repository</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>3. WordPress Configurations And Preparation</title>
		<link>https://www.mediocreinventions.com/wordpress-configurations-and-preparation/</link>
		<pubDate>Mon, 28 Jan 2019 07:24:47 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Installing Wordpress]]></category>
		<category><![CDATA[Wordpress Free Hosting Workaround]]></category>
		<category><![CDATA[configurations]]></category>
		<category><![CDATA[plugins]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">https://localhost/?p=2400</guid>
		<description><![CDATA[<p>Intro In this article, we go over some useful plugins that will help with your WordPress development. We will also go over some configuration changes to help resolve some common issues we might encounter later on. Plugins WP2Static &#8211; We will be converting our website to a static website for &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/wordpress-configurations-and-preparation/">3. WordPress Configurations And Preparation</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this article, we go over some useful plugins that will help with your WordPress development. We will also go over some configuration changes to help resolve some common issues we might encounter later on. <br></p>



<h2>Plugins</h2>



<p><strong>WP2Static</strong> &#8211; We will be converting our website to a static website for a faster user experience (and free hosting options). </p>



<p> <strong>Yoast SEO</strong> &#8211; Helps with search engine optimizing so that you can improve your website traffic. </p>



<p> <strong>GA Google Analytics</strong> &#8211; Helps intergrate your website with Google Analytics so you can track your website&#8217;s traffic better. </p>



<p> <strong>Google XML Sitemaps</strong>&#8211; Helps with generating a simple sitemap for SEO purposes. Yoast SEO can also do this, this plugin may be better for our purposes in the later tutorials. </p>



<p> <strong>Header Footer Code Manager</strong> &#8211; Helps us inject JavaScript snippets on your website&#8217;s pages incase you want to integrate with other services later (Such as AdSense or Amazon Associates). </p>



<p> <strong>Optimize Database after Deleting Revisions</strong> &#8211; Since the service we will be using later on has a very strict database limit (but it&#8217;s free!), this will be crucial for keeping our database size smaller. </p>



<p> <strong>Page Builder by SiteOrigin</strong> &#8211; Helps speed up page designing when editing your website. </p>



<p> <strong>Upload Max File Size</strong> &#8211; By default, WordPress may only limit files to only be 2MB when uploading. This can help increase the limit in a easy and convenient way. If you still get an error saying a file is too big, it might be the resolution of the picture file. <br> <strong>WP Performance Score Booster</strong> &#8211; Helps speed up your website&#8217;s loading speed and performance score. Services such as <a href="https://tools.pingdom.com/">Pingdom</a> and <a href="https://gtmetrix.com/">GTmetrix</a> can help evaluate page speeds. <br>If you activate this plugin on your localhost and you get a 500 server error, you can check your Apache log files in /var/logs/apache2/ and find the error.log file. In the latest entry at the bottom, you should be able to see what the error is. If it says something along the lines of: </p>



<p class="has-text-color has-vivid-red-color">&#8230; /var/www/yourwebsite/.htaccess: Invalid command &#8216;Header&#8217;, perhaps misspelled or defined by a module not included in the server configuration</p>



<p>Then you will likely need to enable the Header module for Apache2 and restart the web server:</p>



<pre class="wp-block-preformatted">sudo a2enmod headers<br>
sudo systemctl restart apache2
</pre>



<h2>Fixing Permalink Issue</h2>



<p>By default, switching the permalink functions in WordPress might break your website. The pages and links to your posts might give you a 404 error saying it cannot be found. If this is happening, you can resolve this by doing the following: </p>



<p>Open the file in a text editor with elevated priviledges (Nano or Vim): /etc/apache2/apache2.conf</p>



<p>To edit this file, you may need elevated priviledges. You can use a text editor like nano by running: </p>



<pre class="wp-block-preformatted">sudo nano /etc/apache2/apache2.conf</pre>



<p>Find the section that says  Directory /var/www/ and edit it so that AllowOverride is set to &#8220;All&#8221;. Below is what the file should look like in that section after editing. </p>



<script src="https://gist.github.com/mt9304/88f86a9b518403907e5cb19183e0c5e5.js"></script>



<p>Then restart the web server by running: </p>



<pre class="wp-block-preformatted">sudo systemctl restart apache2</pre>



<p>You should be able to switch your permalink options around without breaking the links now. </p>



<h2>Optimize Database</h2>



<p>The database service we will be using only limits our database to be 5MB. Since it is such a small limit, we will use the Optimize Database after Deleting Revisions&#8221; plugin to reduce our database size. After installing and activating the plugin, you can access it through the WordPress Admin Panel &gt; Settings &gt; Optimize Database. Make sure to check off all the revisions area, because it can free a lot of space. </p>



<h2>Disable Comments</h2>



<p>Since we will be turning our website into a static website, we won&#8217;t be able to allow users to post comments. You can disable it in the WordPress Admin Panel &gt; Settings &gt; Discussion area. </p>



<p>Now that this is done, we can proceed with deploying our application onto Heroku in the next article. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/wordpress-configurations-and-preparation/">3. WordPress Configurations And Preparation</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>2. Installing And Configuring WordPress (LAMP)</title>
		<link>https://www.mediocreinventions.com/installing-wordpress/</link>
		<pubDate>Sun, 13 Jan 2019 20:32:36 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Installing Wordpress]]></category>
		<category><![CDATA[Wordpress Free Hosting Workaround]]></category>
		<category><![CDATA[apache]]></category>
		<category><![CDATA[installing]]></category>
		<category><![CDATA[mysql]]></category>
		<category><![CDATA[php]]></category>
		<category><![CDATA[Ubuntu 18.04]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">http://dev.mediocreinventions.com/?p=2291</guid>
		<description><![CDATA[<p>Intro In this article, we will install WordPress as fast as we can. We will be using the LAMP environment we just setup in the previous article. This is on Ubuntu 18.04 and the WordPress version we are using will be 5.0.2. If have not set this up yet, feel &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/installing-wordpress/">2. Installing And Configuring WordPress (LAMP)</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this article, we will install WordPress as fast as we can. We will be using the LAMP environment we just setup in the previous article. This is on Ubuntu 18.04 and the WordPress version we are using will be 5.0.2. If have not set this up yet, feel free to visit the LAMP installation <a href="https://mediocreinventions.com/installing-lamp-stack">article</a>. </p>



<h2>Database</h2>



<p>The database by default won&#8217;t allow you to run some of the commands below with the user and password arguments. To fix this, let&#8217;s run </p>



<pre class="wp-block-preformatted">sudo mysql</pre>



<p>Then once you are the console, run (remember to replace CHANGEME with the password):</p>



<pre class="wp-block-preformatted">ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'CHANGEME';<br>
FLUSH PRIVILEGES;
</pre>



<p>Now we can start setting up the database by running the command below (change the password section and YOUSITENAME to the site or database name that you want): </p>



<pre class="wp-block-preformatted">mysql --user="root" --password="CHANGEME" -e "CREATE DATABASE YOURSITENAME DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;"</pre>



<p>This creates the database that we will be using for the website. </p>



<p><strong>Note:</strong><br>
For this tutorial, we will be using the root user in our local environment, but you can create your own user if you wish. We will be migrating this project to a free hosting service in the later articles so this doesn&#8217;t matter too much for our purposes. </p>



<h2>Server Configurations</h2>



<p>Let&#8217;s create our website folder for the server to use by running: </p>



<pre class="wp-block-preformatted">sudo mkdir /var/www/YOURSITENAME</pre>



<p>Then we can download the the WordPress files in a temp folder. </p>



<pre class="wp-block-preformatted">cd /tmp<br>
curl -O https://wordpress.org/latest.tar.gz<br>
tar xzvf latest.tar.gz<br>
touch /tmp/wordpress/.htaccess<br>
mkdir /tmp/wordpress/wp-content/upgrade
</pre>



<h2>Permissions</h2>



<p>Finally, we can copy the folders to the correct place and set its permissions so that everything goes smoothly. </p>



<pre class="wp-block-preformatted">sudo cp -a /tmp/wordpress/. /var/www/YOURSITENAME<br>
sudo chown -R www-data:www-data /var/www/YOURSITENAME<br>
sudo find /var/www/YOURSITENAME/ -type d -exec chmod 750 {} \;<br>
sudo find /var/www/YOURSITENAME/ -type f -exec chmod 640 {} \;
</pre>



<p>Then we can change the document root in the configuration file to point to your website&#8217;s folder. Open up the file at /etc/apache2/sites-available/000-default.conf. You will need to run it with elevated priviledges, so if you are using the Nano text editor you can add sudo at the beginning like this: </p>



<pre class="wp-block-preformatted">sudo nano /etc/apache2/sites-available/000-default.conf</pre>



<p>Or with Vim:</p>



<pre class="wp-block-preformatted">sudo vi /etc/apache2/sites-available/000-default.conf</pre>



<p>Then change the line after Document root to be /var/www/YOURWEBSITEFOLDER</p>



<p>Then restart the web server by running: </p>



<pre class="wp-block-preformatted">sudo systemctl restart apache2</pre>



<p>Now you can visit the website at http://localhost</p>



<p>The page that opens up should look like this:</p>



<figure class="wp-block-image"><img src="https://localhost/wp-content/uploads/localhost.png" alt="" class="wp-image-2332" srcset="https://www.mediocreinventions.com/wp-content/uploads/localhost.png 452w, https://www.mediocreinventions.com/wp-content/uploads/localhost-173x300.png 173w" sizes="(max-width: 452px) 100vw, 452px" /></figure>



<p><strong>Note:</strong><br>
There is a section in the wp-config.php file that you can change to make it more secure. </p>



<p>For this part, we need to generate some texts with the &#8216;Curl&#8217; program. You can install Curl by running: </p>



<pre class="wp-block-preformatted">sudo apt install curl</pre>



<p>Then make sure you copy or save the text you get from running this:</p>



<pre class="wp-block-preformatted">curl -s https://api.wordpress.org/secret-key/1.1/salt/</pre>



<p>Now we can open up then config file in /var/www/wp-config.php (using sudo) and replace the section that looks similar to what we just generated above. </p>



<p>Before opening the file, you might also need to change the permissions of your folder at /var/www/YOURWEBSITENAME by running: <br>
sudo chmod 777 /var/www/YOURWEBSITENAME</p>



<p>This makes it less secure if you are hosting the website on your current machine, but shouldn&#8217;t matter if you are just testing around. </p>



<h2>Installation</h2>



<p>To finish the installation, you can just follow through the instructions on the localhost page. After that, you are done, WordPress is now installed on your machine!</p>



<figure class="wp-block-image"><img src="https://localhost/wp-content/uploads/wpscreen.png" alt="" class="wp-image-2333" srcset="https://www.mediocreinventions.com/wp-content/uploads/wpscreen.png 776w, https://www.mediocreinventions.com/wp-content/uploads/wpscreen-291x300.png 291w, https://www.mediocreinventions.com/wp-content/uploads/wpscreen-768x793.png 768w" sizes="(max-width: 776px) 100vw, 776px" /></figure>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/installing-wordpress/">2. Installing And Configuring WordPress (LAMP)</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>1. Installing LAMP Stack For WordPress</title>
		<link>https://www.mediocreinventions.com/installing-lamp-stack/</link>
		<pubDate>Sun, 13 Jan 2019 20:28:59 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Installing Wordpress]]></category>
		<category><![CDATA[Wordpress Free Hosting Workaround]]></category>
		<category><![CDATA[installing]]></category>
		<category><![CDATA[lamp]]></category>
		<category><![CDATA[Ubuntu 18.04]]></category>
		<category><![CDATA[wordpress]]></category>

		<guid isPermaLink="false">http://dev.mediocreinventions.com/?p=2261</guid>
		<description><![CDATA[<p>Intro In this article, we will begin with installing the LAMP stack on a Ubuntu 18.04 server. LAMP stands for Linux, Apache, MySQL, and PHP. Linux is the operating system, Apache is the web server for the application, MySQL is the database, and PHP is the programming language. To follow &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/installing-lamp-stack/">1. Installing LAMP Stack For WordPress</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this article, we will begin with installing the LAMP stack on a Ubuntu 18.04 server. LAMP stands for Linux, Apache, MySQL, and PHP. Linux is the operating system, Apache is the web server for the application, MySQL is the database, and PHP is the programming language. To follow through this tutorial, you can use a virtual machine and spin up a new Ubuntu 18.04 server (it&#8217;s free). For some more information virtual machines, please visit this article: <a href="https://www.mediocreinventions.com/tools/">https://www.mediocreinventions.com/tools/</a></p>



<p>If you already know how to do this and just want to set everything up as fast as possible, there is a script here that should get everything setup for installing LAMP stack and a WordPress site (You may have to change a few things in the script, like the database password. The comments should help explain what the script does): <a href="https://raw.githubusercontent.com/mt9304/scripts/master/lamp.sh">https://raw.githubusercontent.com/mt9304/scripts/master/lamp.sh</a>. To run it, just run &#8220;bash lamp.sh full&#8221; and make sure it has the proper permissions. </p>



<p>A more detailed article on this can be found at <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04">https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04</a>. This article pretty much covers the same thing, but the one on this page is just much shorter and gets straight to the point. </p>



<h2>Apache</h2>



<p>To start, let&#8217;s run the following commands: </p>



<pre class="wp-block-preformatted">sudo apt update<br>
sudo apt install apache2
</pre>



<p>Now let&#8217;s make sure the firewall doesn&#8217;t interfere with our web server by running this: </p>



<pre class="wp-block-preformatted">sudo ufw allow in "Apache Full"<br>
sudo systemctl restart apache2
</pre>



<h2>MySQL</h2>



<p>We will now install the database by running: </p>



<pre class="wp-block-preformatted">sudo apt install mysql-server</pre>



<p>The command below is just a security script that helps remove some potentially dangerous settings. You can answer Yes for most of them. The MySQL section in this article here explains it in more detail: <a href="https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04">https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-ubuntu-18-04</a></p>



<pre class="wp-block-preformatted">sudo mysql_secure_installation</pre>



<p>The settings are up to you, but here are what I answered for this project: <br>
Password validate plug: N<br>
New Password: CHANGEME<br>
Confirm Passowrd: CHANGEME<br>
Remove anonymous users: Y<br>
Disallow root login remotely: N<br>
Remove test database: Y<br>
Reload priviledge table: Y</p>



<p>The password you set above will be for the &#8216;root&#8217; user. </p>



<h2>PHP</h2>



<p>Now we can install PHP on the server along with some dependencies by running: </p>



<pre class="wp-block-preformatted">sudo apt install php libapache2-mod-php php-mysql</pre>



<pre class="wp-block-preformatted">sudo apt install php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip</pre>



<p>Then we can set it so that Apache prioritizes php files by opening up /etc/apache2/mods-enabled/dir.conf and change the order of the entries there so that it looks like this: </p>



<pre class="wp-block-preformatted"><br>
        DirectoryIndex index.php index.html index.cgi index.pl index.xhtml index.htm<br>

</pre>



<p>Now let&#8217;s restart the Apache server for the changes to take affect</p>



<pre class="wp-block-preformatted">sudo systemctl restart apache2</pre>



<p>The LAMP stack should be all setup now! In the next article, we will use this to install WordPress onto our server. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/installing-lamp-stack/">1. Installing LAMP Stack For WordPress</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>8. Nginx and Let&#8217;s Encrypt (SSL)</title>
		<link>https://www.mediocreinventions.com/nginx-and-lets-encrypt-ssl/</link>
		<pubDate>Mon, 31 Dec 2018 20:42:12 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Ruby on Rails, Nginx and Puma]]></category>
		<category><![CDATA[https]]></category>
		<category><![CDATA[let's encrypt]]></category>
		<category><![CDATA[nginx]]></category>
		<category><![CDATA[server]]></category>
		<category><![CDATA[ssl]]></category>
		<category><![CDATA[Ubuntu]]></category>
		<category><![CDATA[Ubuntu 18.04]]></category>
		<category><![CDATA[web server]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=1621</guid>
		<description><![CDATA[<p>Intro If you have setup your Nginx server on Ubuntu 18.04 then this article will walk you through how to add an SSL certificate using Let&#8217;s Encrypt to your website so that it uses https instead of http. If you chose to use Heroku, then you can skip this article. &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/nginx-and-lets-encrypt-ssl/">8. Nginx and Let&#8217;s Encrypt (SSL)</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h3>Intro</h3>



<p>If you 
have setup your Nginx server on Ubuntu 18.04 then this article will walk
 you through how to add an SSL certificate using Let&#8217;s Encrypt to your 
website so that it uses https instead of http. If you chose to use 
Heroku, then you can skip this article. Please note that this article 
will require you to own a domain name already. This will be a quick 
summary to get you up and running, but a more detailed article on this 
topic can be found here if you are interested: <a href="https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-18-04" target="_blank" rel="noreferrer noopener">https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-18-04 </a></p>



<h3>Setup</h3>



<p>First, let&#8217;s install Certbot:</p>



<pre class="wp-block-preformatted">sudo add-apt-repository ppa:certbot/certbot
sudo apt install python-certbot-nginx
</pre>



<p>Double check that you have your domains entered 
properly in /etc/nginx/sites-available/yourdomain.com or sudo nano 
/etc/nginx/sites-available/default. There should be a line with 
server_name that follows with your domain. For example: </p>



<pre class="wp-block-preformatted">server_name yourdomain.com www.yourdomain.com;
</pre>



<p>If you had to make any changes, make sure to open the file as &#8220;sudo&#8221;, save then and run</p>



<pre class="wp-block-preformatted">sudo systemctl reload nginx
</pre>



<p>If you have your firewall on (you can check its 
status by running sudo ufw status), remember to configure your firewall 
for this:</p>



<pre class="wp-block-preformatted">sudo ufw allow 'Nginx Full'
sudo ufw delete allow 'Nginx HTTP'
</pre>



<p>Then run you can run this to make sure nothing is wrong with the status</p>



<pre class="wp-block-preformatted">sudo ufw status
</pre>



<p>Now you can run the following to finish setting up SSL for your website:</p>



<pre class="wp-block-preformatted">sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
</pre>



<p>This certificate should auto-renew itself when it expires now. </p>



<p>Congratulations, you have just secured your website with SSL and it should be ready for production!</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/nginx-and-lets-encrypt-ssl/">8. Nginx and Let&#8217;s Encrypt (SSL)</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>7. Rails on Nginx, Puma, and PostgreSQL</title>
		<link>https://www.mediocreinventions.com/rails-on-nginx/</link>
		<pubDate>Mon, 31 Dec 2018 20:06:38 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Ruby on Rails, Nginx and Puma]]></category>
		<category><![CDATA[bash]]></category>
		<category><![CDATA[linux]]></category>
		<category><![CDATA[nginx]]></category>
		<category><![CDATA[postgresql]]></category>
		<category><![CDATA[Ruby on Rails]]></category>
		<category><![CDATA[server]]></category>
		<category><![CDATA[Ubuntu]]></category>
		<category><![CDATA[Ubuntu 18.04]]></category>
		<category><![CDATA[web application]]></category>
		<category><![CDATA[web server]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=1451</guid>
		<description><![CDATA[<p>Intro In this article, we will deploy our Ruby on Rails application on a Ubuntu 18.04 server with Nginx (web server) and Puma (application server). We will also use PostgreSQL as our database and Rbenv to help us store sensitive information. Rbenv helps us store sensitive information (such as database &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-on-nginx/">7. Rails on Nginx, Puma, and PostgreSQL</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>In this
 article, we will deploy our Ruby on Rails application on a Ubuntu 18.04
 server with Nginx (web server) and Puma (application server). We will 
also use PostgreSQL as our database and Rbenv to help us store sensitive
 information. Rbenv helps us store sensitive information (such as 
database passwords) on the server as environment variables. This way if 
your project is on Github as a public project, you won&#8217;t have to reveal 
that kind of information to the world. </p>



<p>If you have created a brand new server or VM, remember to install all the dependencies that our project needs. I have created a script to help with this (installing rails, ruby, git, etc) in case you need here: <a rel="noreferrer noopener" href="https://raw.githubusercontent.com/mt9304/scripts/master/rails.sh" target="_blank">https://raw.githubusercontent.com/mt9304/scripts/master/rails.sh</a>. This script can take a while to complete, but you can download and run this on your new server by running: tent/uploads/nginx-logo-e1548640254225.pngIf you have created a brand new server or VM, remember to install all the dependencies that our project needs. I have created a script to help with this (installing rails, ruby, git, etc) in case you need here: <a rel="noreferrer noopener" href="https://raw.githubusercontent.com/mt9304/scripts/master/rails.sh" target="_blank">https://raw.githubusercontent.com/mt9304/scripts/master/rails.sh</a>. This script can take a while to complete, but you can download and run this on your new server by running: </p>



<p>sudo apt install curl</p>



<pre class="wp-block-preformatted">curl -o https://raw.githubusercontent.com/mt9304/scripts/master/rails.sh rails.sh<br>sh rails.sh</pre>



<h2>Installing Dependencies<br></h2>



<p>After our environment is setup, let&#8217;s install more dependencies!</p>



<pre class="wp-block-preformatted">sudo apt update<br>sudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm-dev<br>cd ~/.rbenv/plugins<br>git clone https://github.com/sstephenson/rbenv-vars.git</pre>



<p>Now let&#8217;s go back to our home directory and clone our project folder here. </p>



<pre class="wp-block-preformatted">cd ~
</pre>



<p>(Remember to replace [YOUR_USER] and [YOUR_PROJECT_NAME] with 
the values that match your own project Github. In my case, it would be: <a href="https://github.com/TestingAndLearning/rails_template" target="_blank" rel="noreferrer noopener">https://github.com/TestingAndLearning/rails_template</a>)</p>



<pre class="wp-block-preformatted">git clone https://github.com/[YOUR_USER]/[YOUR_PROJECT_NAME]
</pre>



<p>Now change directory into your application&#8217;s folder and run: </p>



<pre class="wp-block-preformatted">sudo apt-get install libsqlite3-dev<br>bundle install</pre>



<p>Note: </p>



<p>If you don&#8217;t install libsqlite3-dev and your application references sqlite, then you may get an error like: </p>



<p class="has-text-color has-vivid-red-color">An error occurred while installing sqlite3 (1.3.13), and Bundler cannot continue.</p>



<p class="has-text-color has-vivid-red-color">Make sure that `gem install sqlite3 -v &#8216;1.3.13&#8217;` succeeds before bundling.</p>



<h2>Configuration Changes</h2>



<p>Now
 we will go into the /config/database.yml file and make some changes to 
the Production environment, since this is the environment we will be 
deploying in (Remember to replace the values in quotes with your own). </p>



<pre class="wp-block-preformatted">adapter: postgresql
encoding: unicode
database: RT_prod
pool: 5
username: &lt;%= ENV['NAME_OF_YOUR_USER'] %&gt;
password: &lt;%= ENV['YOUR_DATA_BASE_PASSWORD'] %&gt;
</pre>



<p>Your file might look something like this: <a href="https://gist.github.com/mt9304/2c8014ffed16adfe072970050f8643ae" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/2c8014ffed16adfe072970050f8643ae</a></p>



<p>These &lt;%= ENV[&#8216;VALUE&#8217;] %&gt; tags are the environment variables that Rbenv will use. </p>



<p>Now run the following to get a unique value for your application: </p>



<pre class="wp-block-preformatted">rake secret
</pre>



<p>Make sure to copy this down somewhere. Now we can create our rbenv file and add these values: </p>



<pre class="wp-block-preformatted">nano .rbenv vars
or any other text editor like vi or vim. Then edit the contents in this file to be something like: 
SECRET_KEY_BASE=YOURRAKESECRETOUTPUT
NAME_OF_YOUR_USER=YOURACTUALUSER
YOUR_DATA_BASE_PASSWORD=YOURACTUALPASSWORD
</pre>



<p>Remember to replace the values with your own. These 
should match the ones you entered in the database.yml file. For the user
 value, I would recommend using the value you see when you run: </p>



<pre class="wp-block-preformatted">echo $USER
</pre>



<p>This way you can avoid some permission issues with the database in the future. </p>



<h4>Git Ignore<br></h4>



<p>Also,
 if you haven&#8217;t already, let&#8217;s create a .gitignore file and make sure we
 ignore this file so that it doesn&#8217;t end up in the git repository. In 
the application folder, create the file by running: </p>



<pre class="wp-block-preformatted">nano .gitignore
</pre>



<p>Then make sure one of the lines says</p>



<pre class="wp-block-preformatted">.rbenv-vars
</pre>



<p>Save the file and run the following to make sure the .gitignore works properly. </p>



<pre class="wp-block-preformatted">git rm -r --cached .
</pre>



<p>Now you can push into your repository and test if the .rbenv-vars file ends up in there. </p>



<h4>More Configurations<br></h4>



<p>Run the following command and remember the number it outputs (this gets the number of CPUs available to use in your server): </p>



<pre class="wp-block-preformatted">grep -c processor /proc/cpuinfo
</pre>



<p>We can now edit our /config/puma.rb file. Remove the contents in there and make sure it looks something like this: <a href="https://gist.github.com/mt9304/7a444e84098e49ce5d0f92e263f95e21" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/7a444e84098e49ce5d0f92e263f95e21</a></p>



<p>Remember to change the YOURCPUOUTPUT value to the number of CPUs we just found. </p>



<p>Now let&#8217;s go back to your application&#8217;s root directory and run the following to create some required folders: </p>



<pre class="wp-block-preformatted">mkdir -p shared/pids shared/sockets shared/log
</pre>



<p>For the next bit, we will use some scripts I found 
on the internet that will allow you to start/stop the Puma server 
easily. We won&#8217;t go into this in too much detail, but feel free to go to
 <a href="https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04" target="_blank" rel="noreferrer noopener">https://www.digitalocean.com/community/tutorials/how-to-deploy-a-rails-app-with-puma-and-nginx-on-ubuntu-14-04</a> for a similar guide. Go back to your home directory and download the scripts by running this: </p>



<pre class="wp-block-preformatted">cd ~
wget https://raw.githubusercontent.com/puma/puma/master/tools/jungle/upstart/puma-manager.conf
wget https://raw.githubusercontent.com/puma/puma/master/tools/jungle/upstart/puma.conf
sudo cp puma.conf puma-manager.conf /etc/init
</pre>



<p>Make sure to edit the YOURUSER and YOURAPPLICATIONNAME values so that it leads to your application folder. </p>



<pre class="wp-block-preformatted">cat &lt;&lt; EOF | sudo tee -a /etc/puma.conf
/home/YOURUSER/YOURAPPLICATIONNAME
EOF
</pre>



<p>Note:</p>



<p>The &#8220;cat&#8221; command here helps us write a line, the &#8220;tee&#8221; command takes the output of what we write and writes it in the /etc/puma.conf file. The -a argument makes sure it appends to the end of the file so that it doesn&#8217;t overwrite anything. The &#8220;&lt;&lt; EOF&#8221; part tells the &#8220;cat&#8221; command to take anything in the next lines as output for this, until the word EOF is found on its own line. In ths case, it is the path to your application&#8217;s directory. Then the EOF at the end is detected and it stops writing as output. </p>



<h4>Puma Configuration<br></h4>



<p>For
 your convenience, you can run the following to set your variables in 
this session (Make sure to replace appfoldername with your application&#8217;s
 folder name. Also, if you are using the default user, then you don&#8217;t 
have to set this. You can check the values of these by typing echo $USER
 or echo APP_NAME once you have set them): </p>



<pre class="wp-block-preformatted">USER=ubuntu
APP_NAME=appfoldername
</pre>



<p>Now we can run the following </p>



<pre class="wp-block-preformatted">cat &lt;&lt; EOF | sudo tee /etc/systemd/system/puma.service
&nbsp;&nbsp;&nbsp;#Modify the path to the app directory and the user and group. 
&nbsp;&nbsp;&nbsp;[Unit]
&nbsp;&nbsp;&nbsp;Description=Puma HTTP Server
&nbsp;&nbsp;&nbsp;After=network.target
&nbsp;&nbsp;&nbsp;# Uncomment for socket activation (see below)
&nbsp;&nbsp;&nbsp;# Requires=puma.socket
&nbsp;&nbsp;&nbsp;[Service]
&nbsp;&nbsp;&nbsp;# Foreground process (do not use --daemon in ExecStart or config.rb)
&nbsp;&nbsp;&nbsp;Type=simple
&nbsp;&nbsp;&nbsp;# Preferably configure a non-privileged user
&nbsp;&nbsp;&nbsp;User=${USER}
&nbsp;&nbsp;&nbsp;Group=${USER}
&nbsp;&nbsp;&nbsp;# Specify the path to your puma application root
&nbsp;&nbsp;&nbsp;WorkingDirectory=/home/${USER}/${APP_NAME}
&nbsp;&nbsp;&nbsp;# Helpful for debugging socket activation, etc.
&nbsp;&nbsp;&nbsp;# Environment=PUMA_DEBUG=1
&nbsp;&nbsp;&nbsp;# EnvironmentFile=/home/${USER}/${APP_NAME}/.env
&nbsp;&nbsp;&nbsp;# The command to start Puma
&nbsp;&nbsp;&nbsp;# ExecStart=&lt;WD&gt;/sbin/puma -b tcp://0.0.0.0:9292 -b ssl://0.0.0.0:9293?key=key.pem&amp;cert=cert.pem
&nbsp;&nbsp;&nbsp;# ExecStart=/usr/local/bin/bundle exec --keep-file-descriptors puma -e production
&nbsp;&nbsp;&nbsp;# ExecStart=/usr/local/bin/puma -C /home/${USER}/${APP_NAME}/config/puma.rb
&nbsp;&nbsp;&nbsp;ExecStart=/home/${USER}/.rbenv/shims/bundle exec puma -e production -C ./config/puma.rb config.ru
&nbsp;&nbsp;&nbsp;PIDFile=/home/${USER}/${APP_NAME}/shared/tmp/pids/puma.pid
&nbsp;&nbsp;&nbsp;Restart=always
&nbsp;&nbsp;&nbsp;[Install]
&nbsp;&nbsp;&nbsp;WantedBy=multi-user.target
EOF
</pre>



<p>Then restart and enable Puma. </p>



<pre class="wp-block-preformatted">sudo systemctl daemon-reload
sudo systemctl enable puma
</pre>



<h4>Nginx</h4>



<p>Almost done, now we can finally install Nginx: </p>



<pre class="wp-block-preformatted">sudo apt-get install nginx
</pre>



<p>And we can replate some default files with our own by running: </p>



<pre class="wp-block-preformatted">sudo rm /etc/nginx/sites-available/default
</pre>



<pre class="wp-block-preformatted">cat &lt;&lt; EOF | sudo tee /etc/nginx/sites-available/default
&nbsp;&nbsp;&nbsp;upstream app {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Path to Puma SOCK file, as defined previously
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server unix:/home/${USER}/${APP_NAME}/shared/sockets/puma.sock fail_timeout=0;
&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;server {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen 80;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name localhost;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root /home/${USER}/${APP_NAME}/public;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try_files $uri/index.html $uri @app;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;location @app {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass http://app;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_set_header Host \$http_host;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_redirect off;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_page 500 502 503 504 /500.html;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_max_body_size 4G;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keepalive_timeout 10;
&nbsp;&nbsp;&nbsp;}
EOF
</pre>



<h4>PostgreSQL Database<br></h4>



<p>Now let&#8217;s create the users for our database and give it the Superuser role. In the below steps, we basically change to use the postgres user, then enter the pg console with psql, which allows us to run SQL commands for our database. Make sure to replace the user and password values with your own, and include the semi colon at the end: </p>



<pre class="wp-block-preformatted">sudo -iu postgres
psql
CREATE USER username WITH PASSWORD 'yourpassword';
"ALTER USER username WITH SUPERUSER;
\q
exit
</pre>



<p>Note: </p>



<p>&#8220;\q&#8221; exits you from psql and &#8220;exit&#8221; 
takes you back into the default user. While in psql you can also type 
&#8220;\l&#8221; to list all the databases, &#8220;\c databasename&#8221; to connect to a 
database then \dt to list all the tables in that database. You can then 
run SQL commands such as &#8220;SELECT * FROM tablename;&#8221; to interact with 
your database. </p>



<p>The below commands also accomplishes 
the same thing in case you just want to save time (replace the 
YOURPASSWORD value with your password):</p>



<pre class="wp-block-preformatted">DB_PASS=YOURPASSWORD
sudo -u postgres bash -c "psql -c \"CREATE USER $USER WITH PASSWORD '$DB_PASS';\""
sudo -u postgres bash -c "psql -c \"ALTER USER $USER WITH SUPERUSER;\""
</pre>



<p>Now that we have the users avaiable for the 
database, we can set up the Production environment&#8217;s database. Change 
directory into your application&#8217;s folder and run the following (make 
sure your Gemfile has the pg gem in it. There should be a line that says
 something like gem &#8216;pg&#8217;, &#8216;~&gt; 0.18&#8217;: </p>



<pre class="wp-block-preformatted">RAILS_ENV=production rake db:drop
RAILS_ENV=production rake db:create
RAILS_ENV=production rake db:migrate
RAILS_ENV=production rake db:seed
RAILS_ENV=production rake assets:precompile
</pre>



<h4>Restarting the Server<br></h4>



<p>Finally, we can restart Puma and Nginx and for the changes to take affect:</p>



<pre class="wp-block-preformatted">sudo systemctl stop puma
sudo systemctl start puma
</pre>



<p>or</p>



<pre class="wp-block-preformatted">sudo systemctl restart puma
</pre>



<pre class="wp-block-preformatted">sudo systemctl stop nginx
sudo systemctl start nginx
</pre>



<p>or</p>



<pre class="wp-block-preformatted">sudo systemctl restart nginx
</pre>



<p>You can run the following to check the status of these servers to make sure that they are action and running: </p>



<pre class="wp-block-preformatted">sudo systemctl status nginx
sudo systemctl status puma
</pre>



<p>Some of those scripts that we downloaded and used above allow for Puma to be interacted with the systemctl command. </p>



<p>We
 can now visit localhost:80 to check the web application. In 
development, you would usually visit a Rails application through port 
3000, however, Nginx makes it possible to connect it through port 80, 
which is the default port for Production websites. This essentially 
means you can just type localhost in the URL without the port number and
 it should take you to the site. This makes it easier to point your 
domains and such to your server when you decide to go public with your 
website. </p>



<p><strong>Note:</strong></p>



<p>If you find that
 your CSS and JavaScript files are not loading, you can open the 
/config/environments/production.rb file and change the following line to
 true, then restart Puma. </p>



<p>config.public_file_server.enabled = true</p>



<p>Your website should now be ready to go public!</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/rails-on-nginx/">7. Rails on Nginx, Puma, and PostgreSQL</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
		<item>
		<title>6. Ruby on Rails Hosting Options</title>
		<link>https://www.mediocreinventions.com/ruby-on-rails-hosting/</link>
		<pubDate>Mon, 31 Dec 2018 19:51:49 +0000</pubDate>
		<dc:creator><![CDATA[Admin]]></dc:creator>
				<category><![CDATA[Rails and React To Production (Nginx)]]></category>
		<category><![CDATA[Ruby on Rails, Nginx and Puma]]></category>
		<category><![CDATA[aws]]></category>
		<category><![CDATA[heroku]]></category>
		<category><![CDATA[hosting]]></category>
		<category><![CDATA[nginx]]></category>
		<category><![CDATA[Ruby on Rails]]></category>

		<guid isPermaLink="false">http://mediocreinventions.herokuapp.com/?p=1371</guid>
		<description><![CDATA[<p>Intro If you have followed through the Ruby on Rails tutorial in the previous posts, then you should have a basic Ruby on Rails web application on your local machine. The next step would be to move this onto a Production level web server so that the public can access &#8230;</p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/ruby-on-rails-hosting/">6. Ruby on Rails Hosting Options</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></description>
				<content:encoded><![CDATA[
<h2>Intro</h2>



<p>If you have followed through the Ruby on Rails tutorial in the previous posts, then you should have a basic Ruby on Rails web application on your local machine. The next step would be to move this onto a Production level web server so that the public can access it. In this article, we will go over two common hosting options that you can choose from to bring your web application to Production: Heroku and Amazon Web Services (AWS)</p>



<h2>Heroku</h2>



<p>If
 you are not interested in configuring web servers or setting up 
environments, then Heroku may be suitable for you. For Ruby on Rails 
applications, you can simply use their services to host your project for
 free without having to configure too much. This is great if you just 
want a simple &#8220;push to production&#8221; approach and let Heroku do all the 
server related things. </p>



<p><strong>Pros</strong></p>



<ul><li>There is a free tier. </li><li>Easy and quick to get started. </li><li>Can scale easily if you pay for an upgrade. </li></ul>



<p><strong>Cons</strong></p>



<ul><li>Scaling to a higher tier can be more expensive compared to other services. </li><li>Free
 tier has limited hours per month and your application will shut down to
 save hours if inactive. This means that the first time you visit the 
website after it is inactive will take longer to load. </li><li>To add 
SSL certificates (make your website https instead of http) you will need
 to upgrade to at least the hobby ($7 a month) plan. </li></ul>



<p><strong>Other</strong></p>



<ul><li>To give your application a custom domain name, it is free, but you need to register your credit. </li><li>Heroku offers a lot more than just hosting, but for our purposes, using it to host is all we will cover. </li></ul>



<h3>Getting Started With Heroku<br></h3>



<p>If you choose to go the Heroku way, then you can skip the next 2 articles since they will be focusing on setting up a web server manually. Here are the instructions to host your web application on Heroku: </p>



<p>Go to their website <a href="https://www.heroku.com/" target="_blank" rel="noreferrer noopener">https://www.heroku.com/</a> and sign up then login. Go into your dashboard (<a href="https://dashboard.heroku.com/apps" target="_blank" rel="noreferrer noopener">https://dashboard.heroku.com/apps</a>),
 select New in the top right and create a new app. Follow the 
instructions on the page to create your application (remember your 
application name). </p>



<p>Install Heroku CLI</p>



<pre class="wp-block-preformatted">sudo snap install --classic heroku
</pre>



<p>Make sure Git is installed</p>



<pre class="wp-block-preformatted">sudo apt install git
</pre>



<p>Go into your application directory and run the following and enter your credentials</p>



<pre class="wp-block-preformatted">Heroku login
</pre>



<p>Replace replaceme with your app name</p>



<pre class="wp-block-preformatted">git remote add heroku git@heroku.com:replaceme.git<br>git add . <br>git commit -m "First commit. "<br>git push<br>git push heroku master</pre>



<p>You can visit your website on the Heroku dashboard 
by pressing on Open at in the top right, and it should open up your 
project&#8217;s page with a URL like https://yourapp.herokuapp.com</p>



<h4>Heroku Commands<br></h4>



<p>Every time you want to push to heroku and update your live site, you can just run the commands from &#8220;git add&#8221; to &#8220;git push heroku master. &#8221; You can also tell Heroku to run certain commands on the server by typing something like</p>



<pre class="wp-block-preformatted">heroku rake db:create<br>heroku rake db:migrate<br>heroku rake db:seed</pre>



<p>You can basically prepend &#8220;heroku&#8221; to your commands in the terminal then run your usual rails commands to tell it what to do. Running the above rake commands will be necessary most of the times to get your Heroku database up and ready to go. <br></p>



<p><strong>Note:</strong></p>



<p>Before
 using Git, remember to configure your username and name. When you run 
&#8220;git commit&#8221;, it should tell you to configure these with 2 commands if 
you haven&#8217;t already. </p>



<p>If you run into an error saying 
&#8220;Precompiling assets failed. &#8220;, you can try going in in 
config/application.rb, add/edit line to be</p>



<pre class="wp-block-preformatted">config.assets.initialize_on_precompile = false
</pre>



<p>If you run into &#8220;Could not detect rake tasks. &#8220;, you can try running </p>



<pre class="wp-block-preformatted">RAILS_ENV=production bundle exec rake assets:precompile
</pre>



<p>If all went smoothly, your website is now in 
Production and can be visited by anyone on the internet! If you now want
 a custom domain, you will have to enter your credit information with 
Heroku to verify your account. Then, you can buy a domain name from a 
company such as GoDaddy or Namecheap and point your domain (&#8220;CName&#8221; or 
&#8220;A record&#8221;) to your app&#8217;s URL and run </p>



<p>heroku domains:add www.yourwebsite.com</p>



<p>Remember
 to replace yourwebsite with your actual domain name. For more 
information on this, please follow their instructions here: <a href="https://devcenter.heroku.com/articles/custom-domains" target="_blank" rel="noreferrer noopener">https://devcenter.heroku.com/articles/custom-domains</a></p>



<p>If
 you chose the Heroku route, then you are done! (for now). The rest of 
this article will just go over AWS and how to set it up. </p>



<h2>Amazon Web Services (AWS)</h2>



<p>The
 AWS option is basically renting out a remote server from Amazon, and 
configuring it yourself to run a web application. We will be using EC2 
and there is a Free tier for AWS that you can use for a year, there are 
also very cheap servers that can be around $3 a month. </p>



<p><strong>Pros</strong></p>



<ul><li>There is a free trial. <br></li><li>Your server doesn&#8217;t deactivate when there is no activity. </li><li>Since you are configuring everything manually, you can find free alternatives for some software/services. For example, the SSL article later on will show you how to obtain an SSL certificate to make your website use https instead of http for free. You can also install your own free server monitoring tools or connect to your server conveniently to make changes. </li></ul>



<p><strong>Cons</strong></p>



<ul><li>Can
 require a bit more knowledge to configure web servers and can take 
longer than Heroku to set up. However, once you understand what is 
needed to configure this, you can also write a script to automate the 
process. </li><li>The free tier is only for a year. </li><li>Scaling might not be as straight forward as Heroku. </li></ul>



<p><strong>Other</strong></p>



<ul><li>You may need to register your credit card</li><li>Depending on your plan, you can get unexpected charges if you go over your limits</li><li>We
 won&#8217;t be using a graphical interface to connect to our server, so you 
should be comfortable with using the command line to interact with the 
machine. </li></ul>



<h3>Setting up an AWS server</h3>



<p>Go to their website and sign up for AWS <a rel="noreferrer noopener" href="https://aws.amazon.com/" target="_blank">https://aws.amazon.com/</a> then login to their AWS console (you can just Google &#8220;aws console&#8221; if you can&#8217;t find the link on their website). </p>



<p>At the top, click on Services &gt; EC2. Then click on Launch Instance. There will now be 7 steps here to launch your instance. </p>



<p>For
 the first step, you will need to select an AMI, which is basically a 
machine image that your machine will use. So in this case, we want to 
pick a Ubuntu 18.04 image. Search for it (maybe in the marketplace or 
community section) and select it. I selected the Ubuntu 18.04 LTS &#8211; 
Bionic option. </p>



<p>Select the tier that you want to use (there should be a Free tier if you need). For the rest of the steps until 6, you can just stick with the default options. </p>



<h4>Security and SSH<br></h4>



<p>In step 6, you will be configuring security settings. Check Create a new security group and name it. Below that, there should be a table with headers that say Type, Protocol, Port range, and Source. Make sure you create a rule here with Type SSH, TCP Protocol, Port 22, Source Anywhere or your IP. This rule would mean that you are allowed to ssh into your server from anywhere or your ip address (sshing into the machine just means that you can connect to the machine to run commands from your terminal as if it were your own local machine. This also means you will not have a graphical interface for our purposes). For more information on ssh, please refer to this article <a rel="noreferrer noopener" href="https://www.ssh.com/ssh/protocol/" target="_blank">https://www.ssh.com/ssh/protocol/</a></p>



<p>Once you have set up this rule, click launch and it should bring up a window to create your key pair. Create a new keypair here, name it, and make sure you download it (there is no way to generate this again so don&#8217;t lose it). Once you click launch, your machine will start being setup and you can check on its status through the Instances menu option on the left. Once the Instance State says it is running, we can ssh into the server to start setting up our application. </p>



<h4>Accessing the Machine<br></h4>



<p>To ssh 
into this machine, open up your terminal and change directory to the 
folder that you saved your ssh key in then run (make your you replace 
your-key-name.pem with your own .pem file&#8217;s name)</p>



<pre class="wp-block-preformatted">chmod 400 your-key-name.pem
</pre>



<p>The above command &#8220;chmod&#8221; modifies the file&#8217;s permissions to 
allow to you perform the below command properly. For more information on
 the &#8220;chmod&#8221; command, take a look at 
https://isabelcastillo.com/linux-chmod-permissions-cheat-sheet to see a 
list of different permission combinations. </p>



<p>Now you can connect to the server by running</p>



<pre class="wp-block-preformatted">ssh -i your-key-name.pem ubuntu@18.111.111.11
</pre>



<p>Make sure to replace &#8220;your-key-name.pem&#8221; with the name of your 
own .pem file and also replace the IP address after the @ sign with your
 AWS machine&#8217;s. You can see this in the Instances tab as well. (it 
should be the Public IP or IPv4 Public IP column). </p>



<p><strong>Note:</strong></p>



<p>By default, AWS Ubuntu AMIs use the user called &#8220;ubuntu&#8221;, which is why we put ubuntu@18.111.111.11 to connect to the server. </p>



<p>You
 should now be connected to your server properly. As you can see, this 
is just another Ubuntu server that you are able to use now!</p>



<p>Now
 if you want to point a custom domain to your website, you can buy a 
domain name from a provider such as GoDaddy or Namecheap and follow the 
instructions here: <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-ec2-instance.html" target="_blank" rel="noreferrer noopener">https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-to-ec2-instance.html</a></p>



<p>Congratulation,
 your AWS server is now up and running! Now our next few articles will 
go over how to set up these servers to be a proper Production 
environment for your application. </p>
<p>The post <a rel="nofollow" href="https://www.mediocreinventions.com/ruby-on-rails-hosting/">6. Ruby on Rails Hosting Options</a> appeared first on <a rel="nofollow" href="https://www.mediocreinventions.com/">Mediocre Inventions</a>.</p>
]]></content:encoded>
			</item>
	</channel>
</rss>
