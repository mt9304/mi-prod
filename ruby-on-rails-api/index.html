<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>2. Ruby on Rails API - Mediocre Inventions</title><meta name="description" content="In this part, we will begin creating the Ruby on Rails application and setup a basic API to perform CRUD (Create, Read, Update, Delete) operations."><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="2. Ruby on Rails API - Mediocre Inventions"><meta property="og:description" content="In this part, we will begin creating the Ruby on Rails application and setup a basic API to perform CRUD (Create, Read, Update, Delete) operations."><meta property="og:url" content="https://dev.mediocreinventions.com/ruby-on-rails-api/"><meta property="og:site_name" content="Mediocre Inventions"><meta property="article:tag" content="API"><meta property="article:tag" content="Ruby"><meta property="article:tag" content="Ruby on Rails"><meta property="article:section" content="Rails With React"><meta property="article:published_time" content="2018-12-30T02:58:49+00:00"><meta property="article:modified_time" content="2018-12-30T21:11:25+00:00"><meta property="og:updated_time" content="2018-12-30T21:11:25+00:00"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="In this part, we will begin creating the Ruby on Rails application and setup a basic API to perform CRUD (Create, Read, Update, Delete) operations."><meta name="twitter:title" content="2. Ruby on Rails API - Mediocre Inventions"><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//s.w.org"><link rel="stylesheet" id="wp-block-library-css" href="https://dev.mediocreinventions.com/wp-includes/css/dist/block-library/style.min.css" type="text/css" media="all"><link rel="stylesheet" id="wp-block-library-theme-css" href="https://dev.mediocreinventions.com/wp-includes/css/dist/block-library/theme.min.css" type="text/css" media="all"><link rel="stylesheet" id="blog-bank-font-css" href="https://fonts.googleapis.com/css?family=Montserrat%3A400%2C700%7CPoppins%3A300%2C400%7Cfamily%3DSlabo%2B27px%3A300%2C400%2C700&amp;subset=latin%2Clatin-ext" type="text/css" media="all"><link rel="stylesheet" id="bootstrap-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/bootstrap.min.css" type="text/css" media="all"><link rel="stylesheet" id="animate-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/animate.css" type="text/css" media="all"><link rel="stylesheet" id="owl.carousel-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/owl.carousel.min.css" type="text/css" media="all"><link rel="stylesheet" id="material-design-iconic-font-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/material-design-iconic-font.min.css" type="text/css" media="all"><link rel="stylesheet" id="font-awesome-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/font-awesome.min.css" type="text/css" media="all"><link rel="stylesheet" id="blog-bank-default-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/default.css" type="text/css" media="all"><link rel="stylesheet" id="blog-bank-style-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/style.css" type="text/css" media="all"><link rel="stylesheet" id="block-style-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/block.css" type="text/css" media="all"><link rel="stylesheet" id="blog-bank-responsive-css" href="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/css/responsive.css" type="text/css" media="all"><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/vendor/modernizr-2.8.3.min.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-includes/js/jquery/jquery.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-includes/js/jquery/jquery-migrate.min.js"></script></head><body class="post-template-default single single-post postid-641 single-format-standard">
<div id="page" class="site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>
	  
	      
        <header id="site-head"><nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top gold-nav"><div class="container">
                    
                    <div class="navbar-header page-scroll">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main_menu">
                            <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                        </button>
                        				<h1 class="site-title"><a href="https://dev.mediocreinventions.com/" rel="home">Mediocre Inventions</a></h1>
			                        
                    </div>
                    
                                  
                </div>
                
            </nav></header><div id="content" class="site-content">

	<section class="entry-content section-padding"><div class="container"> 
        	<div class="row"> 
            	<div class="col-sm-9">

				<article id="post-641" class="single-content post-text scroll post-641 post type-post status-publish format-standard hentry category-rails-nginx category-rails-authentication-authorization category-rails-to-production category-rails-react tag-api tag-ruby tag-ruby-on-rails"><div class=" content-media"> 
                            	                            </div>
                            <header class=" text-header"><h2>2. Ruby on Rails API</h2>                                                            <div class="post-meta"> 
                                   <a href="https://dev.mediocreinventions.com/author/mt9304gmail-com/"><span class="post-author"><i class="zmdi zmdi-account-circle"> Admin</i></span></a>
                                                                       <span class="post-cat"><i class="fa fa-book"></i> <a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-nginx/" rel="category tag">Rails and Nginx</a>, <a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-authentication-authorization/" rel="category tag">Rails Authentication/Authorization</a>, <a href="https://dev.mediocreinventions.com/category/rails-to-production/" rel="category tag">Rails To Production</a>, <a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-react/" rel="category tag">Rails With React</a></span>
                                                                   
                                </div>
                                                        </header><div class=" ufade post-content"> 
                               	<div class="entry-content">
									
<h2>Intro</h2>



<p>Now that we have the environment setup, we can finally start building our API for the web application. This article will go through how to create a basic REST API for perform CRUD (Create, Read, Update, Delete) operations. </p>



<h2>Start</h2>



<p>Lets start by creating the home page. Generate files needed for the home page by typing:&nbsp;</p>



<pre class="wp-block-preformatted">rails g controller home_page index
</pre>



<p>Create the resources for an object called book.&nbsp;</p>



<pre class="wp-block-preformatted">rails g resource book title author:text description:text pages:integer published:date
</pre>



<p>Migrate the database</p>



<pre class="wp-block-preformatted">rake db:migrate
</pre>



<p><strong>Notes:</strong></p>



<p>If this is the first 
time you are seeing the above commands, here is what it is doing in a 
nutshell for our purposes. &lsquo;g&rsquo; is short for generate, so in the commands
 above we are telling rails to generate things such as a controller or 
resource. The index part is just the page itself (index.html) where you 
can write HTML in and the controller allows for this page to interact 
with the server (to get information from the database). Generating the 
resource in this case allows us to add the routes (or URL paths) for 
getting information about the book. This book is then set represented by
 a title, author (in text format), description, number of pages (in 
integer format), and when it was published (in date format).&nbsp;</p>



<p>Let&rsquo;s add the routes for the api we are making. In the config/routes.rb file, add the lines:&nbsp;</p>



<pre class="wp-block-preformatted">root 'home_page#index'
namespace :api do
&nbsp;resources :books
end
</pre>



<p>The routes.rb file should look like this:&nbsp;<a rel="noreferrer noopener" href="https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf" target="_blank">https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf</a><br><br></p>
<script src="https://gist.github.com/mt9304/82f7a0dca262749e14ebbd28e3b8bbaf.js"></script><p>Now let&rsquo;s replace the contents in the books controller in /app/controllers/books_controller.rb to be:&nbsp;</p>



<pre class="wp-block-preformatted">module Api
&nbsp;class EventsController &lt; ApplicationController
&nbsp;&nbsp;def index
&nbsp;&nbsp;&nbsp;render json: Book.all
&nbsp;&nbsp;end
&nbsp;end
end
</pre>



<p>Now go into /app/controllers and create an folder 
called api, then move the books_controller under there. New path should 
be /app/controllers/api/books_controller.rb</p>



<p>Any API related controllers should now go in that folder.&nbsp;</p>



<p><strong>Note:</strong></p>



<p>Putting
 books under the :api namespace and api folder allows you to access the 
resource in the URL after /api. So in this case, it would be <a href="http://website.com/api/books" target="_blank" rel="noreferrer noopener">website.com/api/books</a>.
 Making books a resource by writing &ldquo;resources :book&rdquo; allows users to 
access books through its RESTful URLs. Below are the following URLs you 
will be able to use to get data about the books. Since we have the index
 method in the controller and views for books, you should be able to 
visit that page (we haven&rsquo;t added any book records in the database yet, 
so these URLs wouldn&rsquo;t return anything right now).&nbsp;</p>



<p>GET		/api/books(.:format)			api/books#index</p>



<p>POST	/api/books(.:format)			api/books#create</p>



<p>GET 	/api/books/new(.:format)		api/books#new</p>



<p>GET 	/api/books/:id/edit(.:format) 	api/books#edit</p>



<p>GET 	/api/books/:id(.:format) 		api/books#show</p>



<p>PATCH 	/api/books/:id(.:format) 		api/books#update</p>



<p>PUT 	/api/books/:id(.:format) 		api/books#update</p>



<p>DELETE 	/api/books/:id(.:format)</p>



<p>More information on REST here: <a href="https://www.restapitutorial.com/lessons/restfulresourcenaming.html" target="_blank" rel="noreferrer noopener">https://www.restapitutorial.com/lessons/restfulresourcenaming.html</a></p>



<p>Here are the basics that you need to know in Rails regarding these APIs and routes:&nbsp;</p>



<p>&ndash; Controllers will have a few standard methods:&nbsp;</p>



<p>	index method for showing all the books (/books)</p>



<p>	create method for creating a new book (/books/new)</p>



<p>	show method for showing one particular book (/books/id where id is the book&rsquo;s id in the database)</p>



<p>	update method for updating an existing book (/books/id/edit)</p>



<p>	destroy method for deleting an existing book (/books/id/ but with a DELETE method)</p>



<p>Here
 we will fill out the rest of the controller methods to allow for the 
above behavior through the API. Change your books controller so that it 
is:&nbsp;<a href="https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc" target="_blank" rel="noreferrer noopener">https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc</a></p>
<script src="https://gist.github.com/mt9304/bd76031fe933b833beffd29e9af538dc.js"></script><h2>Adding Books</h2>



<p>Now let&rsquo;s add some Books to our database so that we can test out the API. Go into the Rails console by typing in the terminal:&nbsp;</p>



<pre class="wp-block-preformatted">rails c
</pre>



<p>(Make sure you are in the project&rsquo;s folder)</p>



<p>The
 Rails console lets you run Ruby code in. real time to make changes to 
your application. In this case, we want to add a new Book, so let&rsquo;s type
 in:&nbsp;</p>



<pre class="wp-block-preformatted">b = Book.create :title =&gt; "How To Cook", :author =&gt; "Bob", :description =&gt; "Teaches you how to cook. ", :pages =&gt; 20, :published =&gt; "2018-11-03"
b2 = Book.create :title =&gt; "How To Bake", :author =&gt; "Bill", :description =&gt; "Teaches you how to bake. ", :pages =&gt; 15, :published =&gt; "2018-02-03"
</pre>



<p><strong>Note:</strong></p>



<p>While in the console, type &ldquo;quit&rdquo; to exit.&nbsp;</p>



<p>This
 will create 2 entries in our database in the Books table. The database 
right now is stored in /db/development.sqlite3. You can open this with 
sqlitebrowser.&nbsp;</p>



<p>If you haven&rsquo;t downloaded it yet, you can install it by running these commands in the terminal:&nbsp;</p>



<pre class="wp-block-preformatted">sudo add-apt-repository ppa:linuxgndu/sqlitebrowser-testing
sudo apt-get update &amp;&amp; sudo apt-get install sqlitebrowser
</pre>



<p>Then you can go into your project folder and open it with the sqlitebrowser command:</p>



<pre class="wp-block-preformatted">sqlitebrowser db/development.sqlite3
</pre>



<p>You can right click the Books option and see your 
entries in there. Now you can try out the API urls above to see it in 
action (Make sure you start your server first by running: rails s). For 
example, go to localhost:3000/api/books/1</p>



<p>You should 
receive a page with information about one of the books we just created 
in JSON format. The &ldquo;1&rdquo; at the end of the URL represent&rsquo;s the ID, which 
is found in the ID column of the Books table in the database. So if you 
go to localhost:3000/api/books/2 then it will give you information on 
the other book. </p>
<div class="tags-links bfade">Tagged: <a href="https://dev.mediocreinventions.com/tag/api/" rel="tag">API</a>, <a href="https://dev.mediocreinventions.com/tag/ruby/" rel="tag">Ruby</a>, <a href="https://dev.mediocreinventions.com/tag/ruby-on-rails/" rel="tag">Ruby on Rails</a></div>								</div>
                            </div>
        </article><nav class="navigation post-navigation" role="navigation"><h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://dev.mediocreinventions.com/rails-setup/" rel="prev">1. Rails Setup</a></div><div class="nav-next"><a href="https://dev.mediocreinventions.com/rails-authentication/" rel="next">3. Rails Authentication</a></div></div>
	</nav></div>
								<div class="col-sm-3"> 
				
<aside id="secondary" class="widget-area"><section id="search-2" class="widget widget_search"><form role="search" method="get" class="search-form" action="https://dev.mediocreinventions.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search &hellip;" value="" name="s"></label>
				<input type="submit" class="search-submit" value="Search"></form></section><section id="recent-posts-2" class="widget widget_recent_entries"><h3 class="widget-title">Recent Posts</h3>		<ul><li>
					<a href="https://dev.mediocreinventions.com/rails-with-react/">5. Rails With React</a>
									</li>
											<li>
					<a href="https://dev.mediocreinventions.com/rails-authorization/">4. Rails Authorization</a>
									</li>
											<li>
					<a href="https://dev.mediocreinventions.com/rails-authentication/">3. Rails Authentication</a>
									</li>
											<li>
					<a href="https://dev.mediocreinventions.com/ruby-on-rails-api/">2. Ruby on Rails API</a>
									</li>
											<li>
					<a href="https://dev.mediocreinventions.com/rails-setup/">1. Rails Setup</a>
									</li>
					</ul></section><section id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul><li class="cat-item cat-item-8"><a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-nginx/" title="A collection of tutorials on how to deploy a Ruby on Rails application with Nginx and Puma (Ubuntu 18.04). ">Rails and Nginx</a>
</li>
	<li class="cat-item cat-item-281"><a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-authentication-authorization/" title="This portion of the tutorial is for building a simple Ruby on Rails application that has authentication and authorization. ">Rails Authentication/Authorization</a>
</li>
	<li class="cat-item cat-item-9"><a href="https://dev.mediocreinventions.com/category/rails-to-production/" title="A collection of tutorials on creating a Ruby on Rails (5.2) web application with React  (16.2) and pushing it into a Production environment. The Production environments can be Heroku or AWS with a Ubuntu 18.04 server using Nginx and Puma. Some articles will also cover how to monitor the application. ">Rails To Production</a>
</li>
	<li class="cat-item cat-item-2"><a href="https://dev.mediocreinventions.com/category/rails-to-production/rails-react/" title="Tutorial for creating a React (16.2) website using Ruby on Rails (5.2). ">Rails With React</a>
</li>
	<li class="cat-item cat-item-10"><a href="https://dev.mediocreinventions.com/category/web-basics/" title="Before starting some of the tutorials on this website, it is recommended to review some of the topics here to make sure you are familiar with these concepts. 
The articles in this category cover some of the basic topics that are relevant to programming, web application development, and the internet. These are mainly brief articles that are meant to be a crash course on the topic to get you an idea of what to expect. 
You can read these in order starting from 1., but the other tutorials on this site will also reference specific articles here when relevant. 
">Web Application Basics</a>
</li>
		</ul></section></aside></div>
							</div>
		</div>
	</section></div>

        <footer class="footer-section"><div class="container"> 
                <div class="footer-bottom"> 
                    <div class="copy-text">
                    	<p>Mediocre Inventions | 2018</p>
                    </div>
                </div>
            </div>
        </footer></div>

<script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/bootstrap.min.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/plugins.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/scrollreveal.min.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/owl.carousel.min.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/main.js"></script><script type="text/javascript" src="https://dev.mediocreinventions.com/wp-content/themes/blog-bank/assets/js/skip-link-focus-fix.js"></script></body></html>
